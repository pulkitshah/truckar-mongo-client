{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport _ from \"lodash\";\nimport { branchApi } from \"../api/branch-api\";\nimport axios from \"../utils/axios\";\nconst initialState = {\n  branches: [],\n  branchIds: [],\n  isNextPageLoading: true\n};\nexport const slice = createSlice({\n  name: \"branch\",\n  initialState,\n  reducers: {\n    getBranches(state, action) {\n      const branches = action.payload;\n      state.branches = branches;\n      state.isNextPageLoading = false;\n    },\n\n    createBranch(state, action) {\n      const {\n        branch\n      } = action.payload;\n      state.branches = [...state.branches, branch];\n    },\n\n    selectBranch(state, action) {\n      const {\n        branchId = null\n      } = action.payload;\n      state.isModalOpen = true;\n      state.selectedBranchId = branchId;\n    },\n\n    updateBranch(state, action) {\n      const {\n        branch\n      } = action.payload;\n      state.branches = _.map(state.branches, _branch => {\n        if (_branch.id === branch.id) {\n          return branch;\n        }\n\n        return _branch;\n      });\n    },\n\n    deleteBranch(state, action) {\n      const {\n        branchId\n      } = action.payload;\n      state.branches = _.reject(state.branches, {\n        id: branchId\n      });\n    },\n\n    selectRange(state, action) {\n      const {\n        start,\n        end\n      } = action.payload;\n      state.isModalOpen = true;\n      state.selectedRange = {\n        start,\n        end\n      };\n    },\n\n    openModal(state) {\n      state.isModalOpen = true;\n    },\n\n    closeModal(state) {\n      state.isModalOpen = false;\n      state.selectedBranchId = null;\n      state.selectedRange = null;\n    }\n\n  }\n});\nexport const reducer = slice.reducer;\nexport const getBranches = limit => async dispatch => {\n  const response = await branchApi.getBranchesByUser();\n  console.log(\"getBranches = ()\");\n  dispatch(slice.actions.getBranches(response.data));\n};\nexport const createBranch = data => async dispatch => {\n  const response = await axios.post(\"/api/calendar/branches/new\", data);\n  dispatch(slice.actions.createBranch(response.data));\n};\nexport const selectBranch = branchId => async dispatch => {\n  dispatch(slice.actions.selectBranch({\n    branchId\n  }));\n};\nexport const updateBranch = (branchId, update) => async dispatch => {\n  const response = await axios.post(\"/api/calendar/branches/update\", {\n    branchId,\n    update\n  });\n  dispatch(slice.actions.updateBranch(response.data));\n};\nexport const deleteBranch = branchId => async dispatch => {\n  await axios.post(\"/api/calendar/branches/remove\", {\n    branchId\n  });\n  dispatch(slice.actions.deleteBranch({\n    branchId\n  }));\n};\nexport const selectRange = (start, end) => dispatch => {\n  dispatch(slice.actions.selectRange({\n    start: start.getTime(),\n    end: end.getTime()\n  }));\n};\nexport const openModal = () => dispatch => {\n  dispatch(slice.actions.openModal());\n};\nexport const closeModal = () => dispatch => {\n  dispatch(slice.actions.closeModal());\n};\nexport default slice;","map":{"version":3,"sources":["/Users/pulkitshah/Desktop/truckarv2/renderer/slices/branches.js"],"names":["createSlice","_","branchApi","axios","initialState","branches","branchIds","isNextPageLoading","slice","name","reducers","getBranches","state","action","payload","createBranch","branch","selectBranch","branchId","isModalOpen","selectedBranchId","updateBranch","map","_branch","id","deleteBranch","reject","selectRange","start","end","selectedRange","openModal","closeModal","reducer","limit","dispatch","response","getBranchesByUser","console","log","actions","data","post","update","getTime"],"mappings":"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","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport _ from \"lodash\";\nimport { branchApi } from \"../api/branch-api\";\nimport axios from \"../utils/axios\";\n\nconst initialState = {\n  branches: [],\n  branchIds: [],\n  isNextPageLoading: true,\n};\n\nexport const slice = createSlice({\n  name: \"branch\",\n  initialState,\n  reducers: {\n    getBranches(state, action) {\n      const branches = action.payload;\n      state.branches = branches;\n      state.isNextPageLoading = false;\n    },\n    createBranch(state, action) {\n      const { branch } = action.payload;\n\n      state.branches = [...state.branches, branch];\n    },\n    selectBranch(state, action) {\n      const { branchId = null } = action.payload;\n\n      state.isModalOpen = true;\n      state.selectedBranchId = branchId;\n    },\n    updateBranch(state, action) {\n      const { branch } = action.payload;\n\n      state.branches = _.map(state.branches, (_branch) => {\n        if (_branch.id === branch.id) {\n          return branch;\n        }\n\n        return _branch;\n      });\n    },\n    deleteBranch(state, action) {\n      const { branchId } = action.payload;\n\n      state.branches = _.reject(state.branches, {\n        id: branchId,\n      });\n    },\n    selectRange(state, action) {\n      const { start, end } = action.payload;\n\n      state.isModalOpen = true;\n      state.selectedRange = {\n        start,\n        end,\n      };\n    },\n    openModal(state) {\n      state.isModalOpen = true;\n    },\n    closeModal(state) {\n      state.isModalOpen = false;\n      state.selectedBranchId = null;\n      state.selectedRange = null;\n    },\n  },\n});\n\nexport const reducer = slice.reducer;\n\nexport const getBranches = (limit) => async (dispatch) => {\n  const response = await branchApi.getBranchesByUser();\n  console.log(\"getBranches = ()\");\n  dispatch(slice.actions.getBranches(response.data));\n};\n\nexport const createBranch = (data) => async (dispatch) => {\n  const response = await axios.post(\"/api/calendar/branches/new\", data);\n\n  dispatch(slice.actions.createBranch(response.data));\n};\n\nexport const selectBranch = (branchId) => async (dispatch) => {\n  dispatch(slice.actions.selectBranch({ branchId }));\n};\n\nexport const updateBranch = (branchId, update) => async (dispatch) => {\n  const response = await axios.post(\"/api/calendar/branches/update\", {\n    branchId,\n    update,\n  });\n\n  dispatch(slice.actions.updateBranch(response.data));\n};\n\nexport const deleteBranch = (branchId) => async (dispatch) => {\n  await axios.post(\"/api/calendar/branches/remove\", {\n    branchId,\n  });\n\n  dispatch(slice.actions.deleteBranch({ branchId }));\n};\n\nexport const selectRange = (start, end) => (dispatch) => {\n  dispatch(\n    slice.actions.selectRange({\n      start: start.getTime(),\n      end: end.getTime(),\n    })\n  );\n};\n\nexport const openModal = () => (dispatch) => {\n  dispatch(slice.actions.openModal());\n};\n\nexport const closeModal = () => (dispatch) => {\n  dispatch(slice.actions.closeModal());\n};\n\nexport default slice;\n"]},"metadata":{},"sourceType":"module"}