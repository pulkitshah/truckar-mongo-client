{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/pulkitshah/Desktop/truckarv2/renderer/components/dashboard/order/order-create-form.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useRef, useMemo, useCallback } from \"react\";\nimport { useRouter } from \"next/router\";\nimport toast from \"react-hot-toast\";\nimport * as Yup from \"yup\";\nimport { useFormik } from \"formik\";\nimport moment from \"moment\";\nimport { Autocomplete, Box, Button, Card, CardContent, Grid, InputAdornment, TextField, Typography } from \"@mui/material\";\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\nimport { useAuth } from \"../../../hooks/use-auth\";\nimport DeliveryDetails from \"./delivery-details\";\nimport PartyAutocomplete from \"../autocompletes/party-autocomplete/party-autocomplete\";\nimport VehicleAutocomplete from \"../autocompletes/vehicle-autocomplete/vehicle-autocomplete\";\nimport DriverAutocomplete from \"../autocompletes/driver-autocomplete/driver-autocomplete\";\nimport GoogleMaps from \"./google-maps\";\nimport { orderApi } from \"../../../api/order-api\";\nimport { useDispatch } from \"../../../store\";\nexport const OrderCreateForm = props => {\n  const order = props.order || {};\n  const router = useRouter();\n  const dispatch = useDispatch();\n  const {\n    user\n  } = useAuth();\n  const {\n    0: selectedVehicle,\n    1: setSelectedVehicle\n  } = useState(null);\n  const {\n    0: driver,\n    1: setDriver\n  } = useState();\n  const {\n    0: addresses,\n    1: setAddresses\n  } = useState({\n    waypoints: []\n  });\n  const [inputValue, setInputValue] = React.useState(\"\");\n  const [saleType, setSaleType] = React.useState({\n    value: \"quantity\",\n    unit: \"MT\",\n    label: \"Per MT\"\n  });\n  const [purchaseType, setPurchaseType] = React.useState(\"quantity\");\n  const saleTypes = [{\n    value: \"quantity\",\n    unit: \"MT\",\n    label: \"Per MT\"\n  }, {\n    value: \"quantity\",\n    unit: \"Kg\",\n    label: \"Per Kg\"\n  }, {\n    value: \"quantity\",\n    unit: \"Box\",\n    label: \"Per Box\"\n  }, {\n    value: \"quantity\",\n    unit: \"Pcs\",\n    label: \"Per Pcs\"\n  }, {\n    value: \"time\",\n    unit: \"Days\",\n    label: \"Per Days\"\n  }, {\n    value: \"fixed\",\n    label: \"Fixed\"\n  }];\n  const purchaseTypes = [{\n    value: \"quantity\",\n    label: \"Per Ton\"\n  }, {\n    value: \"fixed\",\n    label: \"Fixed\"\n  }];\n  let validationShape = {\n    orderNo: Yup.number().required(\"Order No is required\").test({\n      name: \"Checking Duplicate Order No\",\n      exclusive: false,\n      params: {},\n      message: \"Order No cannot be repeated in the fiscal year of sale date\",\n      test: async function (value) {\n        try {\n          const response = await orderApi.validateDuplicateOrderNo(value, this.parent.saleDate, user); // console.log(response);\n\n          return response;\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }),\n    saleDate: Yup.object().required(\"Sale Date is required\"),\n    customer: Yup.object().nullable().required(\"Customer is required\"),\n    vehicle: Yup.lazy(value => {\n      switch (typeof value) {\n        case \"object\":\n          return Yup.object().nullable().required(\"Vehicle is required\");\n\n        case \"string\":\n          return Yup.string().required(\"Vehicle is required\");\n\n        default:\n          return Yup.string().required(\"Vehicle is required\");\n      }\n    }),\n    saleType: Yup.string().required(\"Sale is required\"),\n    saleRate: Yup.string().required(\"Sale Rate is required\")\n  };\n\n  if (typeof selectedVehicle === \"object\" && selectedVehicle !== null) {} else {\n    validationShape.transporter = Yup.object().required(\"Transporter is required\");\n    validationShape.purchaseType = Yup.string().required(\"Purchase is required\");\n    validationShape.purchaseRate = Yup.string().required(\"Purchase Rate is required\");\n  }\n\n  validationShape.deliveryDetails = Yup.array().of(Yup.object().shape({\n    loading: Yup.object().required(\"Loading Point is Required\"),\n    // these constraints take precedence\n    unloading: Yup.object().required(\"Unloading Point is Required\") // these constraints take precedence\n\n  }));\n  const formik = useFormik({\n    initialValues: {\n      orderNo: order.orderNo || \"\",\n      saleDate: order.saleDate || moment(),\n      customer: order.customer || null,\n      vehicle: order.vehicle || null,\n      driver: order.driver || null,\n      transporter: order.transporter || \"\",\n      saleType: order.saleType || saleType,\n      saleRate: order.saleRate || \"\",\n      minimumSaleGuarantee: order.minimumSaleGuarantee || null,\n      purchaseType: order.purchaseType || purchaseType,\n      purchaseRate: order.purchaseRate || \"\",\n      minimumPurchaseGuarantee: order.minimumPurchaseGuarantee || null,\n      deliveryDetails: [{\n        loading: \"\",\n        unloading: \"\",\n        billQuantity: \"\",\n        unloadingQuantity: \"\"\n      }]\n    },\n    validationSchema: Yup.object().shape(validationShape),\n    onSubmit: async (values, helpers) => {\n      try {\n        const newOrder = {\n          orderNo: parseInt(values.orderNo),\n          saleDate: values.saleDate.format(),\n          // customer: values.customer,\n          customerId: values.customer.id,\n          saleRate: values.saleRate,\n          saleType: values.saleType,\n          user: user.id,\n          deliveries: JSON.stringify(values.deliveryDetails)\n        };\n\n        if (typeof selectedVehicle === \"object\" && selectedVehicle !== null) {\n          // newOrder.vehicle = values.vehicle;\n          newOrder.vehicleId = values.vehicle.id;\n          newOrder.vehicleNumber = values.vehicle.vehicleNumber;\n\n          if (values.driver) {\n            // newOrder.driver = values.driver;\n            newOrder.driverId = values.driver.id;\n          }\n        } else {\n          newOrder.vehicleNumber = values.vehicle; // newOrder.transporter = values.transporter;\n\n          newOrder.transporterId = values.transporter.id;\n          newOrder.purchaseRate = values.purchaseRate;\n          newOrder.purchaseType = values.purchaseType;\n          if (values.minimumPurchaseGuarantee) newOrder.minimumPurchaseGuarantee = values.minimumPurchaseGuarantee;\n        }\n\n        if (values.minimumSaleGuarantee) newOrder.minimumSaleGuarantee = values.minimumSaleGuarantee;\n        console.log(newOrder);\n        await orderApi.createOrder(newOrder, dispatch);\n        toast.success(\"Order created!\"); // router.push(\"/dashboard/orders\");\n      } catch (err) {\n        console.error(err);\n        toast.error(\"Something went wrong!\");\n        helpers.setStatus({\n          success: false\n        });\n        helpers.setErrors({\n          submit: err.message\n        });\n        helpers.setSubmitting(false);\n      }\n    }\n  });\n  React.useEffect(() => {\n    setAddresses({\n      waypoints: [...addresses.waypoints]\n    }); // Setting Origin\n\n    setAddresses(addresses => _objectSpread(_objectSpread({}, addresses), {\n      origin: formik.values.deliveryDetails[0].loading.description\n    })); // Setting Destination\n\n    if (formik.values.deliveryDetails[formik.values.deliveryDetails.length - 1].unloading.description) {\n      setAddresses(addresses => _objectSpread(_objectSpread({}, addresses), {\n        destination: formik.values.deliveryDetails[formik.values.deliveryDetails.length - 1].unloading.description\n      }));\n    } // Setting waypoints\n\n\n    let waypoints = [];\n    formik.values.deliveryDetails.map(delivery => {\n      if (delivery.loading.description) {\n        waypoints.push({\n          location: delivery.loading.description\n        });\n      }\n\n      if (delivery.unloading.description) {\n        waypoints.push({\n          location: delivery.unloading.description\n        });\n      }\n    });\n    waypoints = waypoints.filter(waypoint => waypoint.location !== formik.values.deliveryDetails[0].loading.description);\n    waypoints = waypoints.filter(waypoint => waypoint.location !== formik.values.deliveryDetails[formik.values.deliveryDetails.length - 1].unloading.description);\n    waypoints = [...new Map(waypoints.map(item => [item.location, item])).values()];\n    setAddresses({\n      origin: formik.values.deliveryDetails[0].loading.description,\n      destination: formik.values.deliveryDetails[formik.values.deliveryDetails.length - 1].unloading.description,\n      waypoints: waypoints\n    });\n  }, [formik.values.deliveryDetails]);\n\n  const handleOnChange = (event, newValue) => {\n    formik.setFieldValue(\"saleType\", newValue); // setFieldValue('driver', newValue);\n  };\n\n  const handleInputChange = (event, newInputValue) => {\n    setInputValue(newInputValue); // setFieldValue('driver', newInputValue);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", _objectSpread(_objectSpread({\n    onSubmit: formik.handleSubmit\n  }, props), {}, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 4,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: \"Basic details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 8,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 3,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  error: Boolean(formik.touched.orderNo && formik.errors.orderNo),\n                  fullWidth: true,\n                  helperText: formik.touched.orderNo && formik.errors.orderNo,\n                  label: \"Order No\",\n                  name: \"orderNo\",\n                  onBlur: formik.handleBlur,\n                  onChange: event => {\n                    formik.setFieldValue(`orderNo`, event.target.value);\n                  },\n                  value: formik.values.orderNo\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(DatePicker, {\n                  id: \"saleDate\",\n                  name: \"saleDate\",\n                  label: \"Sale date\",\n                  showTodayButton: true,\n                  inputFormat: \"DD/MM/YYYY\",\n                  value: formik.values.saleDate,\n                  onClick: () => setFieldTouched(\"end\"),\n                  onChange: date => formik.setFieldValue(\"saleDate\", moment(date)),\n                  slotProps: {\n                    textField: {\n                      helperText: formik.touched.saleDate && formik.errors.saleDate,\n                      error: Boolean(formik.touched.saleDate && formik.errors.saleDate)\n                    }\n                  },\n                  renderInput: params => /*#__PURE__*/_jsxDEV(TextField, _objectSpread({\n                    fullWidth: true\n                  }, params), void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(PartyAutocomplete, {\n                  errors: formik.errors,\n                  touched: formik.touched,\n                  setFieldValue: formik.setFieldValue,\n                  handleBlur: formik.handleBlur,\n                  type: \"customer\",\n                  user: user,\n                  formik: formik\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        mt: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            sx: {\n              mb: 6\n            },\n            item: true,\n            md: 4,\n            xs: 12,\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                mb: 3\n              },\n              variant: \"h6\",\n              children: \"Delivery details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 373,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(GoogleMaps, {\n              addresses: addresses\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 8,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(DeliveryDetails, {\n              formik: formik\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        mt: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 4,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: \"Vehicle details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 8,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 3,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(VehicleAutocomplete, {\n                  errors: formik.errors,\n                  touched: formik.touched,\n                  setFieldValue: formik.setFieldValue,\n                  handleBlur: formik.handleBlur,\n                  setSelectedVehicle: setSelectedVehicle,\n                  setDriver: setDriver,\n                  user: user\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 12,\n                children: typeof selectedVehicle === \"object\" && selectedVehicle !== null ? /*#__PURE__*/_jsxDEV(DriverAutocomplete, {\n                  errors: formik.errors,\n                  touched: formik.touched,\n                  setFieldValue: formik.setFieldValue,\n                  handleBlur: formik.handleBlur,\n                  setSelectedVehicle: setSelectedVehicle,\n                  setDriver: setDriver,\n                  user: user,\n                  values: formik.values\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 21\n                }, this) : selectedVehicle !== null && /*#__PURE__*/_jsxDEV(PartyAutocomplete, {\n                  errors: formik.errors,\n                  touched: formik.touched,\n                  setFieldValue: formik.setFieldValue,\n                  handleBlur: formik.handleBlur,\n                  type: \"transporter\",\n                  user: user,\n                  formik: formik\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        mt: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 4,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: \"Sale details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 440,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 8,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 3,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 12,\n                children: [/*#__PURE__*/_jsxDEV(TextField, {\n                  error: Boolean(formik.touched.saleType && formik.errors.saleType),\n                  onBlur: formik.handleBlur,\n                  name: \"saleType\",\n                  label: \"Sale Type\",\n                  InputLabelProps: {\n                    shrink: true\n                  },\n                  fullWidth: true,\n                  id: \"saleType\",\n                  select: true,\n                  value: saleType,\n                  onChange: event => {\n                    setSaleType(event.target.value);\n                    formik.setFieldValue(\"saleType\", event.target.value);\n                  },\n                  SelectProps: {\n                    native: true\n                  },\n                  helperText: \"Please select sale type\",\n                  variant: \"outlined\",\n                  children: saleTypes.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: option.value,\n                    children: option.label\n                  }, option.value, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 23\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Autocomplete, {\n                  autoSelect: true,\n                  blurOnSelect: true,\n                  id: \"saleType\",\n                  open: open,\n                  onOpen: () => {\n                    setOpen(true);\n                  },\n                  onClose: () => {\n                    setOpen(false);\n                  },\n                  getOptionSelected: (option, value) => {\n                    if (value) return option.label === value.label.replace(/\\w\\S*/g, function (txt) {\n                      return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n                    });\n                  },\n                  getOptionLabel: option => {\n                    return option && option.label.replace(/\\w\\S*/g, function (txt) {\n                      return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n                    });\n                  },\n                  options: saleTypes,\n                  value: formik.values.saleType,\n                  onChange: handleOnChange,\n                  inputValue: inputValue,\n                  onInputChange: handleInputChange,\n                  renderInput: params => /*#__PURE__*/_jsxDEV(TextField, _objectSpread(_objectSpread({}, params), {}, {\n                    name: \"saleType\",\n                    label: \"Sale Type\",\n                    variant: \"outlined\",\n                    error: Boolean(formik.touched.saleType && formik.errors.saleType),\n                    fullWidth: true,\n                    helperText: formik.touched.saleType && formik.errors.saleType,\n                    onBlur: formik.handleBlur\n                  }), void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 516,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 476,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 445,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  error: Boolean(formik.touched.saleRate && formik.errors.saleRate),\n                  variant: \"outlined\",\n                  onChange: formik.handleChange,\n                  onBlur: formik.handleBlur,\n                  helperText: formik.touched.saleRate && formik.errors.saleRate,\n                  InputProps: {\n                    endAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                      position: \"end\",\n                      children: saleType.unit\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 546,\n                      columnNumber: 25\n                    }, this)\n                  },\n                  id: \"saleRate\",\n                  name: \"saleRate\",\n                  label: \"Sale Rate\",\n                  fullWidth: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 534,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 17\n              }, this), saleType === \"quantity\" && /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 6,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  error: Boolean(formik.touched.minimumSaleGuarantee && formik.errors.minimumSaleGuarantee),\n                  variant: \"outlined\",\n                  onChange: formik.handleChange,\n                  onBlur: formik.handleBlur,\n                  helperText: formik.touched.minimumSaleGuarantee && formik.errors.minimumSaleGuarantee,\n                  id: \"minimumSaleGuarantee\",\n                  name: \"minimumSaleGuarantee\",\n                  label: \"Min. Load Guarantee\",\n                  fullWidth: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 559,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 558,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 7\n    }, this), !(typeof selectedVehicle === \"object\") && selectedVehicle !== null && /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        mt: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(CardContent, {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 4,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: \"Purchase details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 587,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            md: 8,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 3,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  error: Boolean(formik.touched.purchaseType && formik.errors.purchaseType),\n                  onBlur: formik.handleBlur,\n                  name: \"purchaseType\",\n                  label: \"Purchase Type\",\n                  InputLabelProps: {\n                    shrink: true\n                  },\n                  fullWidth: true,\n                  id: \"purchaseType\",\n                  select: true,\n                  value: purchaseType,\n                  onChange: event => {\n                    setPurchaseType(event.target.value);\n                    event.target.value;\n                    formik.setFieldValue(\"purchaseType\", event.target.value);\n                  },\n                  SelectProps: {\n                    native: true\n                  },\n                  helperText: \"Please select purchase type\",\n                  variant: \"outlined\",\n                  children: purchaseTypes.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: option.value,\n                    children: option.label\n                  }, option.value, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 623,\n                    columnNumber: 25\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 593,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 592,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 12,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  error: Boolean(formik.touched.purchaseRate && formik.errors.purchaseRate),\n                  variant: \"outlined\",\n                  onChange: formik.handleChange,\n                  onBlur: formik.handleBlur,\n                  helperText: formik.touched.purchaseRate && formik.errors.purchaseRate,\n                  id: \"purchaseRate\",\n                  name: \"purchaseRate\",\n                  label: \"Purchase Rate\",\n                  fullWidth: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 630,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 629,\n                columnNumber: 19\n              }, this), purchaseType === \"quantity\" && /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 6,\n                children: /*#__PURE__*/_jsxDEV(TextField, {\n                  error: Boolean(formik.touched.minimumPurchaseGuarantee && formik.errors.minimumPurchaseGuarantee),\n                  variant: \"outlined\",\n                  onChange: formik.handleChange,\n                  onBlur: formik.handleBlur,\n                  helperText: formik.touched.minimumPurchaseGuarantee && formik.errors.minimumPurchaseGuarantee,\n                  id: \"minimumPurchaseGuarantee\",\n                  name: \"minimumPurchaseGuarantee\",\n                  label: \"Min. Load Guarantee\",\n                  fullWidth: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 650,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 649,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 591,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 584,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        justifyContent: \"space-between\",\n        mx: -1,\n        mb: -1,\n        mt: 3\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        color: \"error\",\n        sx: {\n          m: 1,\n          mr: \"auto\"\n        },\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 685,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        sx: {\n          m: 1\n        },\n        variant: \"outlined\",\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 694,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        sx: {\n          m: 1\n        },\n        type: \"submit\",\n        variant: \"contained\",\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 697,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 675,\n      columnNumber: 7\n    }, this)]\n  }), void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 301,\n    columnNumber: 5\n  }, this);\n};","map":{"version":3,"sources":["/Users/pulkitshah/Desktop/truckarv2/renderer/components/dashboard/order/order-create-form.js"],"names":["React","useState","useRef","useMemo","useCallback","useRouter","toast","Yup","useFormik","moment","Autocomplete","Box","Button","Card","CardContent","Grid","InputAdornment","TextField","Typography","DatePicker","useAuth","DeliveryDetails","PartyAutocomplete","VehicleAutocomplete","DriverAutocomplete","GoogleMaps","orderApi","useDispatch","OrderCreateForm","props","order","router","dispatch","user","selectedVehicle","setSelectedVehicle","driver","setDriver","addresses","setAddresses","waypoints","inputValue","setInputValue","saleType","setSaleType","value","unit","label","purchaseType","setPurchaseType","saleTypes","purchaseTypes","validationShape","orderNo","number","required","test","name","exclusive","params","message","response","validateDuplicateOrderNo","parent","saleDate","error","console","log","object","customer","nullable","vehicle","lazy","string","saleRate","transporter","purchaseRate","deliveryDetails","array","of","shape","loading","unloading","formik","initialValues","minimumSaleGuarantee","minimumPurchaseGuarantee","billQuantity","unloadingQuantity","validationSchema","onSubmit","values","helpers","newOrder","parseInt","format","customerId","id","deliveries","JSON","stringify","vehicleId","vehicleNumber","driverId","transporterId","createOrder","success","err","setStatus","setErrors","submit","setSubmitting","useEffect","origin","description","length","destination","map","delivery","push","location","filter","waypoint","Map","item","handleOnChange","event","newValue","setFieldValue","handleInputChange","newInputValue","handleSubmit","Boolean","touched","errors","handleBlur","target","setFieldTouched","date","textField","helperText","mt","mb","shrink","native","option","open","setOpen","replace","txt","charAt","toUpperCase","substr","toLowerCase","handleChange","endAdornment","display","flexWrap","justifyContent","mx","m","mr"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useMemo, useCallback } from \"react\";\nimport { useRouter } from \"next/router\";\nimport toast from \"react-hot-toast\";\nimport * as Yup from \"yup\";\nimport { useFormik } from \"formik\";\nimport moment from \"moment\";\n\nimport {\n  Autocomplete,\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Grid,\n  InputAdornment,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\nimport { useAuth } from \"../../../hooks/use-auth\";\nimport DeliveryDetails from \"./delivery-details\";\nimport PartyAutocomplete from \"../autocompletes/party-autocomplete/party-autocomplete\";\nimport VehicleAutocomplete from \"../autocompletes/vehicle-autocomplete/vehicle-autocomplete\";\nimport DriverAutocomplete from \"../autocompletes/driver-autocomplete/driver-autocomplete\";\nimport GoogleMaps from \"./google-maps\";\nimport { orderApi } from \"../../../api/order-api\";\nimport { useDispatch } from \"../../../store\";\n\nexport const OrderCreateForm = (props) => {\n  const order = props.order || {};\n  const router = useRouter();\n  const dispatch = useDispatch();\n  const { user } = useAuth();\n  const [selectedVehicle, setSelectedVehicle] = useState(null);\n  const [driver, setDriver] = useState();\n  const [addresses, setAddresses] = useState({ waypoints: [] });\n  const [inputValue, setInputValue] = React.useState(\"\");\n\n  const [saleType, setSaleType] = React.useState({\n    value: \"quantity\",\n    unit: \"MT\",\n    label: \"Per MT\",\n  });\n  const [purchaseType, setPurchaseType] = React.useState(\"quantity\");\n\n  const saleTypes = [\n    {\n      value: \"quantity\",\n      unit: \"MT\",\n      label: \"Per MT\",\n    },\n    {\n      value: \"quantity\",\n      unit: \"Kg\",\n      label: \"Per Kg\",\n    },\n    {\n      value: \"quantity\",\n      unit: \"Box\",\n      label: \"Per Box\",\n    },\n    {\n      value: \"quantity\",\n      unit: \"Pcs\",\n      label: \"Per Pcs\",\n    },\n    {\n      value: \"time\",\n      unit: \"Days\",\n      label: \"Per Days\",\n    },\n    {\n      value: \"fixed\",\n      label: \"Fixed\",\n    },\n  ];\n\n  const purchaseTypes = [\n    {\n      value: \"quantity\",\n      label: \"Per Ton\",\n    },\n    {\n      value: \"fixed\",\n      label: \"Fixed\",\n    },\n  ];\n\n  let validationShape = {\n    orderNo: Yup.number()\n      .required(\"Order No is required\")\n      .test({\n        name: \"Checking Duplicate Order No\",\n        exclusive: false,\n        params: {},\n        message: \"Order No cannot be repeated in the fiscal year of sale date\",\n        test: async function (value) {\n          try {\n            const response = await orderApi.validateDuplicateOrderNo(\n              value,\n              this.parent.saleDate,\n              user\n            );\n            // console.log(response);\n            return response;\n          } catch (error) {\n            console.log(error);\n          }\n        },\n      }),\n    saleDate: Yup.object().required(\"Sale Date is required\"),\n    customer: Yup.object().nullable().required(\"Customer is required\"),\n    vehicle: Yup.lazy((value) => {\n      switch (typeof value) {\n        case \"object\":\n          return Yup.object().nullable().required(\"Vehicle is required\");\n        case \"string\":\n          return Yup.string().required(\"Vehicle is required\");\n        default:\n          return Yup.string().required(\"Vehicle is required\");\n      }\n    }),\n    saleType: Yup.string().required(\"Sale is required\"),\n    saleRate: Yup.string().required(\"Sale Rate is required\"),\n  };\n\n  if (typeof selectedVehicle === \"object\" && selectedVehicle !== null) {\n  } else {\n    validationShape.transporter = Yup.object().required(\n      \"Transporter is required\"\n    );\n    validationShape.purchaseType = Yup.string().required(\n      \"Purchase is required\"\n    );\n    validationShape.purchaseRate = Yup.string().required(\n      \"Purchase Rate is required\"\n    );\n  }\n\n  validationShape.deliveryDetails = Yup.array().of(\n    Yup.object().shape({\n      loading: Yup.object().required(\"Loading Point is Required\"), // these constraints take precedence\n      unloading: Yup.object().required(\"Unloading Point is Required\"), // these constraints take precedence\n    })\n  );\n  const formik = useFormik({\n    initialValues: {\n      orderNo: order.orderNo || \"\",\n      saleDate: order.saleDate || moment(),\n      customer: order.customer || null,\n      vehicle: order.vehicle || null,\n      driver: order.driver || null,\n      transporter: order.transporter || \"\",\n      saleType: order.saleType || saleType,\n      saleRate: order.saleRate || \"\",\n      minimumSaleGuarantee: order.minimumSaleGuarantee || null,\n      purchaseType: order.purchaseType || purchaseType,\n      purchaseRate: order.purchaseRate || \"\",\n      minimumPurchaseGuarantee: order.minimumPurchaseGuarantee || null,\n      deliveryDetails: [\n        {\n          loading: \"\",\n          unloading: \"\",\n          billQuantity: \"\",\n          unloadingQuantity: \"\",\n        },\n      ],\n    },\n    validationSchema: Yup.object().shape(validationShape),\n    onSubmit: async (values, helpers) => {\n      try {\n        const newOrder = {\n          orderNo: parseInt(values.orderNo),\n          saleDate: values.saleDate.format(),\n          // customer: values.customer,\n          customerId: values.customer.id,\n          saleRate: values.saleRate,\n          saleType: values.saleType,\n          user: user.id,\n          deliveries: JSON.stringify(values.deliveryDetails),\n        };\n\n        if (typeof selectedVehicle === \"object\" && selectedVehicle !== null) {\n          // newOrder.vehicle = values.vehicle;\n          newOrder.vehicleId = values.vehicle.id;\n          newOrder.vehicleNumber = values.vehicle.vehicleNumber;\n          if (values.driver) {\n            // newOrder.driver = values.driver;\n            newOrder.driverId = values.driver.id;\n          }\n        } else {\n          newOrder.vehicleNumber = values.vehicle;\n          // newOrder.transporter = values.transporter;\n          newOrder.transporterId = values.transporter.id;\n          newOrder.purchaseRate = values.purchaseRate;\n          newOrder.purchaseType = values.purchaseType;\n          if (values.minimumPurchaseGuarantee)\n            newOrder.minimumPurchaseGuarantee = values.minimumPurchaseGuarantee;\n        }\n\n        if (values.minimumSaleGuarantee)\n          newOrder.minimumSaleGuarantee = values.minimumSaleGuarantee;\n\n        console.log(newOrder);\n        await orderApi.createOrder(newOrder, dispatch);\n\n        toast.success(\"Order created!\");\n        // router.push(\"/dashboard/orders\");\n      } catch (err) {\n        console.error(err);\n        toast.error(\"Something went wrong!\");\n        helpers.setStatus({ success: false });\n        helpers.setErrors({ submit: err.message });\n        helpers.setSubmitting(false);\n      }\n    },\n  });\n\n  React.useEffect(() => {\n    setAddresses({ waypoints: [...addresses.waypoints] });\n\n    // Setting Origin\n    setAddresses((addresses) => ({\n      ...addresses,\n      ...{\n        origin: formik.values.deliveryDetails[0].loading.description,\n      },\n    }));\n\n    // Setting Destination\n    if (\n      formik.values.deliveryDetails[formik.values.deliveryDetails.length - 1]\n        .unloading.description\n    ) {\n      setAddresses((addresses) => ({\n        ...addresses,\n        ...{\n          destination:\n            formik.values.deliveryDetails[\n              formik.values.deliveryDetails.length - 1\n            ].unloading.description,\n        },\n      }));\n    }\n\n    // Setting waypoints\n\n    let waypoints = [];\n\n    formik.values.deliveryDetails.map((delivery) => {\n      if (delivery.loading.description) {\n        waypoints.push({\n          location: delivery.loading.description,\n        });\n      }\n\n      if (delivery.unloading.description) {\n        waypoints.push({\n          location: delivery.unloading.description,\n        });\n      }\n    });\n\n    waypoints = waypoints.filter(\n      (waypoint) =>\n        waypoint.location !==\n        formik.values.deliveryDetails[0].loading.description\n    );\n    waypoints = waypoints.filter(\n      (waypoint) =>\n        waypoint.location !==\n        formik.values.deliveryDetails[formik.values.deliveryDetails.length - 1]\n          .unloading.description\n    );\n\n    waypoints = [\n      ...new Map(waypoints.map((item) => [item.location, item])).values(),\n    ];\n\n    setAddresses({\n      origin: formik.values.deliveryDetails[0].loading.description,\n      destination:\n        formik.values.deliveryDetails[formik.values.deliveryDetails.length - 1]\n          .unloading.description,\n      waypoints: waypoints,\n    });\n  }, [formik.values.deliveryDetails]);\n\n  const handleOnChange = (event, newValue) => {\n    formik.setFieldValue(\"saleType\", newValue);\n\n    // setFieldValue('driver', newValue);\n  };\n\n  const handleInputChange = (event, newInputValue) => {\n    setInputValue(newInputValue);\n    // setFieldValue('driver', newInputValue);\n  };\n\n  return (\n    <form onSubmit={formik.handleSubmit} {...props}>\n      <Card>\n        <CardContent>\n          <Grid container spacing={3}>\n            <Grid item md={4} xs={12}>\n              <Typography variant=\"h6\">Basic details</Typography>\n            </Grid>\n            <Grid item md={8} xs={12}>\n              <Grid container spacing={3}>\n                <Grid item md={4} xs={12}>\n                  <TextField\n                    error={Boolean(\n                      formik.touched.orderNo && formik.errors.orderNo\n                    )}\n                    fullWidth\n                    helperText={formik.touched.orderNo && formik.errors.orderNo}\n                    label=\"Order No\"\n                    name=\"orderNo\"\n                    onBlur={formik.handleBlur}\n                    onChange={(event) => {\n                      formik.setFieldValue(`orderNo`, event.target.value);\n                    }}\n                    value={formik.values.orderNo}\n                  />\n                </Grid>\n                <Grid item md={4} xs={12}>\n                  <DatePicker\n                    id=\"saleDate\"\n                    name=\"saleDate\"\n                    label=\"Sale date\"\n                    showTodayButton={true}\n                    inputFormat=\"DD/MM/YYYY\"\n                    value={formik.values.saleDate}\n                    onClick={() => setFieldTouched(\"end\")}\n                    onChange={(date) =>\n                      formik.setFieldValue(\"saleDate\", moment(date))\n                    }\n                    slotProps={{\n                      textField: {\n                        helperText:\n                          formik.touched.saleDate && formik.errors.saleDate,\n                        error: Boolean(\n                          formik.touched.saleDate && formik.errors.saleDate\n                        ),\n                      },\n                    }}\n                    renderInput={(params) => (\n                      <TextField fullWidth {...params} />\n                    )}\n                  />\n                </Grid>\n                <Grid item md={4} xs={12}>\n                  <PartyAutocomplete\n                    errors={formik.errors}\n                    touched={formik.touched}\n                    setFieldValue={formik.setFieldValue}\n                    handleBlur={formik.handleBlur}\n                    type=\"customer\"\n                    user={user}\n                    formik={formik}\n                  />\n                </Grid>\n              </Grid>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n\n      <Card sx={{ mt: 3 }}>\n        <CardContent>\n          <Grid container spacing={3}>\n            <Grid sx={{ mb: 6 }} item md={4} xs={12}>\n              <Typography sx={{ mb: 3 }} variant=\"h6\">\n                Delivery details\n              </Typography>\n              <GoogleMaps addresses={addresses} />\n            </Grid>\n            <Grid item md={8} xs={12}>\n              <DeliveryDetails formik={formik} />\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n\n      <Card sx={{ mt: 3 }}>\n        <CardContent>\n          <Grid container spacing={3}>\n            <Grid item md={4} xs={12}>\n              <Typography variant=\"h6\">Vehicle details</Typography>\n            </Grid>\n            <Grid item md={8} xs={12}>\n              <Grid container spacing={3}>\n                <Grid item md={4} xs={12}>\n                  <VehicleAutocomplete\n                    errors={formik.errors}\n                    touched={formik.touched}\n                    setFieldValue={formik.setFieldValue}\n                    handleBlur={formik.handleBlur}\n                    setSelectedVehicle={setSelectedVehicle}\n                    setDriver={setDriver}\n                    user={user}\n                  />\n                </Grid>\n                <Grid item md={4} xs={12}>\n                  {typeof selectedVehicle === \"object\" &&\n                  selectedVehicle !== null ? (\n                    <DriverAutocomplete\n                      errors={formik.errors}\n                      touched={formik.touched}\n                      setFieldValue={formik.setFieldValue}\n                      handleBlur={formik.handleBlur}\n                      setSelectedVehicle={setSelectedVehicle}\n                      setDriver={setDriver}\n                      user={user}\n                      values={formik.values}\n                    />\n                  ) : (\n                    selectedVehicle !== null && (\n                      <PartyAutocomplete\n                        errors={formik.errors}\n                        touched={formik.touched}\n                        setFieldValue={formik.setFieldValue}\n                        handleBlur={formik.handleBlur}\n                        type=\"transporter\"\n                        user={user}\n                        formik={formik}\n                      />\n                    )\n                  )}\n                </Grid>\n              </Grid>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n\n      <Card sx={{ mt: 3 }}>\n        <CardContent>\n          <Grid container spacing={3}>\n            <Grid item md={4} xs={12}>\n              <Typography variant=\"h6\">Sale details</Typography>\n            </Grid>\n            <Grid item md={8} xs={12}>\n              <Grid container spacing={3}>\n                <Grid item md={4} xs={12}>\n                  <TextField\n                    error={Boolean(\n                      formik.touched.saleType && formik.errors.saleType\n                    )}\n                    onBlur={formik.handleBlur}\n                    name=\"saleType\"\n                    label=\"Sale Type\"\n                    InputLabelProps={{\n                      shrink: true,\n                    }}\n                    fullWidth\n                    id=\"saleType\"\n                    select\n                    value={saleType}\n                    onChange={(event) => {\n                      setSaleType(event.target.value);\n                      formik.setFieldValue(\"saleType\", event.target.value);\n                    }}\n                    SelectProps={{\n                      native: true,\n                    }}\n                    helperText=\"Please select sale type\"\n                    variant=\"outlined\"\n                  >\n                    {saleTypes.map((option) => (\n                      <option key={option.value} value={option.value}>\n                        {option.label}\n                      </option>\n                    ))}\n                  </TextField>\n                  <Autocomplete\n                    autoSelect={true}\n                    blurOnSelect={true}\n                    id=\"saleType\"\n                    open={open}\n                    onOpen={() => {\n                      setOpen(true);\n                    }}\n                    onClose={() => {\n                      setOpen(false);\n                    }}\n                    getOptionSelected={(option, value) => {\n                      if (value)\n                        return (\n                          option.label ===\n                          value.label.replace(/\\w\\S*/g, function (txt) {\n                            return (\n                              txt.charAt(0).toUpperCase() +\n                              txt.substr(1).toLowerCase()\n                            );\n                          })\n                        );\n                    }}\n                    getOptionLabel={(option) => {\n                      return (\n                        option &&\n                        option.label.replace(/\\w\\S*/g, function (txt) {\n                          return (\n                            txt.charAt(0).toUpperCase() +\n                            txt.substr(1).toLowerCase()\n                          );\n                        })\n                      );\n                    }}\n                    options={saleTypes}\n                    value={formik.values.saleType}\n                    onChange={handleOnChange}\n                    inputValue={inputValue}\n                    onInputChange={handleInputChange}\n                    renderInput={(params) => (\n                      <TextField\n                        {...params}\n                        name=\"saleType\"\n                        label=\"Sale Type\"\n                        variant=\"outlined\"\n                        error={Boolean(\n                          formik.touched.saleType && formik.errors.saleType\n                        )}\n                        fullWidth\n                        helperText={\n                          formik.touched.saleType && formik.errors.saleType\n                        }\n                        onBlur={formik.handleBlur}\n                      />\n                    )}\n                  />\n                </Grid>\n                <Grid item md={4} xs={12}>\n                  <TextField\n                    error={Boolean(\n                      formik.touched.saleRate && formik.errors.saleRate\n                    )}\n                    variant=\"outlined\"\n                    onChange={formik.handleChange}\n                    onBlur={formik.handleBlur}\n                    helperText={\n                      formik.touched.saleRate && formik.errors.saleRate\n                    }\n                    InputProps={{\n                      endAdornment: (\n                        <InputAdornment position=\"end\">\n                          {saleType.unit}\n                        </InputAdornment>\n                      ),\n                    }}\n                    id=\"saleRate\"\n                    name=\"saleRate\"\n                    label=\"Sale Rate\"\n                    fullWidth\n                  />\n                </Grid>\n                {saleType === \"quantity\" && (\n                  <Grid item md={4} xs={6}>\n                    <TextField\n                      error={Boolean(\n                        formik.touched.minimumSaleGuarantee &&\n                          formik.errors.minimumSaleGuarantee\n                      )}\n                      variant=\"outlined\"\n                      onChange={formik.handleChange}\n                      onBlur={formik.handleBlur}\n                      helperText={\n                        formik.touched.minimumSaleGuarantee &&\n                        formik.errors.minimumSaleGuarantee\n                      }\n                      id=\"minimumSaleGuarantee\"\n                      name=\"minimumSaleGuarantee\"\n                      label=\"Min. Load Guarantee\"\n                      fullWidth\n                    />\n                  </Grid>\n                )}\n              </Grid>\n            </Grid>\n          </Grid>\n        </CardContent>\n      </Card>\n      {!(typeof selectedVehicle === \"object\") && selectedVehicle !== null && (\n        <Card sx={{ mt: 3 }}>\n          <CardContent>\n            <Grid container spacing={3}>\n              <Grid item md={4} xs={12}>\n                <Typography variant=\"h6\">Purchase details</Typography>\n              </Grid>\n              <Grid item md={8} xs={12}>\n                <Grid container spacing={3}>\n                  <Grid item md={4} xs={12}>\n                    <TextField\n                      error={Boolean(\n                        formik.touched.purchaseType &&\n                          formik.errors.purchaseType\n                      )}\n                      onBlur={formik.handleBlur}\n                      name=\"purchaseType\"\n                      label=\"Purchase Type\"\n                      InputLabelProps={{\n                        shrink: true,\n                      }}\n                      fullWidth\n                      id=\"purchaseType\"\n                      select\n                      value={purchaseType}\n                      onChange={(event) => {\n                        setPurchaseType(event.target.value);\n                        event.target.value;\n                        formik.setFieldValue(\n                          \"purchaseType\",\n                          event.target.value\n                        );\n                      }}\n                      SelectProps={{\n                        native: true,\n                      }}\n                      helperText=\"Please select purchase type\"\n                      variant=\"outlined\"\n                    >\n                      {purchaseTypes.map((option) => (\n                        <option key={option.value} value={option.value}>\n                          {option.label}\n                        </option>\n                      ))}\n                    </TextField>\n                  </Grid>\n                  <Grid item md={4} xs={12}>\n                    <TextField\n                      error={Boolean(\n                        formik.touched.purchaseRate &&\n                          formik.errors.purchaseRate\n                      )}\n                      variant=\"outlined\"\n                      onChange={formik.handleChange}\n                      onBlur={formik.handleBlur}\n                      helperText={\n                        formik.touched.purchaseRate &&\n                        formik.errors.purchaseRate\n                      }\n                      id=\"purchaseRate\"\n                      name=\"purchaseRate\"\n                      label=\"Purchase Rate\"\n                      fullWidth\n                    />\n                  </Grid>\n                  {purchaseType === \"quantity\" && (\n                    <Grid item md={4} xs={6}>\n                      <TextField\n                        error={Boolean(\n                          formik.touched.minimumPurchaseGuarantee &&\n                            formik.errors.minimumPurchaseGuarantee\n                        )}\n                        variant=\"outlined\"\n                        onChange={formik.handleChange}\n                        onBlur={formik.handleBlur}\n                        helperText={\n                          formik.touched.minimumPurchaseGuarantee &&\n                          formik.errors.minimumPurchaseGuarantee\n                        }\n                        id=\"minimumPurchaseGuarantee\"\n                        name=\"minimumPurchaseGuarantee\"\n                        label=\"Min. Load Guarantee\"\n                        fullWidth\n                      />\n                    </Grid>\n                  )}\n                </Grid>\n              </Grid>\n            </Grid>\n          </CardContent>\n        </Card>\n      )}\n      <Box\n        sx={{\n          display: \"flex\",\n          flexWrap: \"wrap\",\n          justifyContent: \"space-between\",\n          mx: -1,\n          mb: -1,\n          mt: 3,\n        }}\n      >\n        <Button\n          color=\"error\"\n          sx={{\n            m: 1,\n            mr: \"auto\",\n          }}\n        >\n          Delete\n        </Button>\n        <Button sx={{ m: 1 }} variant=\"outlined\">\n          Cancel\n        </Button>\n        <Button sx={{ m: 1 }} type=\"submit\" variant=\"contained\">\n          Create\n        </Button>\n      </Box>\n    </form>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}