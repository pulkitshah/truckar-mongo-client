{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/pulkitshah/Desktop/truckarv2/renderer/pages/dashboard/vehicles/index.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useEffect, useRef, useState } from \"react\";\nimport NextLink from \"next/link\";\nimport Head from \"next/head\";\nimport { useTranslation } from \"react-i18next\";\nimport moment from \"moment\";\nimport { Box, Button, Divider, Grid, InputAdornment, Tab, Tabs, TextField, Typography } from \"@mui/material\";\nimport { styled } from \"@mui/material/styles\";\nimport { useDispatch, useSelector } from \"../../../store\";\nimport { vehicleApi } from \"../../../api/vehicle-api\";\nimport { AuthGuard } from \"../../../components/authentication/auth-guard\";\nimport { OnBoardingGuard } from \"../../../components/authentication/onboarding-guard\";\nimport { DashboardLayout } from \"../../../components/dashboard/dashboard-layout\";\nimport { VehicleDrawer } from \"../../../components/dashboard/vehicle/vehicle-drawer\";\nimport VehicleGrid from \"../../../components/dashboard/vehicle/vehicle-grid\";\nimport { useMounted } from \"../../../hooks/use-mounted\";\nimport { useAuth } from \"../../../hooks/use-auth\";\nimport { Plus as PlusIcon } from \"../../../icons/plus\";\nimport { Search as SearchIcon } from \"../../../icons/search\";\nimport { gtm } from \"../../../lib/gtm\"; // DataStore Imports\n\nimport { DataStore, Predicates } from \"@aws-amplify/datastore\";\nimport { Vehicle } from \"../../../models\";\nconst tabs = [{\n  label: \"All\",\n  value: \"all\"\n}, {\n  label: \"Canceled\",\n  value: \"canceled\"\n}, {\n  label: \"Completed\",\n  value: \"complete\"\n}, {\n  label: \"Pending\",\n  value: \"pending\"\n}, {\n  label: \"Rejected\",\n  value: \"rejected\"\n}];\nconst sortOptions = [{\n  label: \"Newest\",\n  value: \"desc\"\n}, {\n  label: \"Oldest\",\n  value: \"asc\"\n}];\n\nconst applyFilters = (vehicles, filters) => vehicles.filter(vehicle => {\n  if (filters.query) {\n    // Checks only the vehicle number, but can be extended to support other fields, such as customer\n    // name, email, etc.\n    const containsQuery = vehicle.number.toLowerCase().includes(filters.query.toLowerCase());\n\n    if (!containsQuery) {\n      return false;\n    }\n  }\n\n  if (typeof filters.status !== \"undefined\") {\n    const statusMatched = vehicle.status === filters.status;\n\n    if (!statusMatched) {\n      return false;\n    }\n  }\n\n  return true;\n});\n\nconst applySort = (vehicles, vehicle) => vehicles.sort((a, b) => {\n  const comparator = a.createdAt > b.createdAt ? -1 : 1;\n  return vehicle === \"desc\" ? comparator : -comparator;\n});\n\nconst VehicleListInner = styled(\"div\", {\n  shouldForwardProp: prop => prop !== \"open\"\n})(({\n  theme,\n  open\n}) => _objectSpread({\n  flexGrow: 1,\n  overflow: \"hidden\",\n  paddingBottom: theme.spacing(8),\n  paddingTop: theme.spacing(8),\n  zIndex: 1,\n  [theme.breakpoints.up(\"lg\")]: {\n    marginRight: -500\n  },\n  transition: theme.transitions.create(\"margin\", {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen\n  })\n}, open && {\n  [theme.breakpoints.up(\"lg\")]: {\n    marginRight: 0\n  },\n  transition: theme.transitions.create(\"margin\", {\n    easing: theme.transitions.easing.easeOut,\n    duration: theme.transitions.duration.enteringScreen\n  })\n}));\n\nconst VehicleList = () => {\n  const {\n    t\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const {\n    user\n  } = useAuth();\n  const rootRef = useRef(null);\n  const vehicles = useSelector(state => state.vehicles);\n  console.log(vehicles);\n  const {\n    0: drawer,\n    1: setDrawer\n  } = useState({\n    isOpen: false,\n    vehicleId: null\n  });\n\n  const handleOpenDrawer = params => {\n    setDrawer({\n      isOpen: true,\n      vehicleId: params.row.id\n    });\n  };\n\n  useEffect(async () => {\n    try {\n      await vehicleApi.getVehiclesByUser(user, dispatch);\n    } catch (error) {\n      console.log(error);\n    }\n  }, []);\n\n  const handleCloseDrawer = () => {\n    setDrawer({\n      isOpen: false,\n      vehicleId: null\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Dashboard: Vehicle List | Truckar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      component: \"main\",\n      ref: rootRef,\n      sx: {\n        backgroundColor: \"background.paper\",\n        display: \"flex\",\n        flexGrow: 1,\n        overflow: \"hidden\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(VehicleListInner, {\n        open: drawer.isOpen,\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            px: 3\n          },\n          children: /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            justifyContent: \"space-between\",\n            spacing: 3,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h4\",\n                children: t(\"Vehicles\")\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              children: /*#__PURE__*/_jsxDEV(NextLink, {\n                href: \"/dashboard/vehicles/new\",\n                passHref: true,\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  component: \"a\",\n                  startIcon: /*#__PURE__*/_jsxDEV(PlusIcon, {\n                    fontSize: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 186,\n                    columnNumber: 32\n                  }, this),\n                  variant: \"contained\",\n                  children: \"Add\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 3,\n            px: 3,\n            height: \"70vh\",\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(VehicleGrid, {\n            onOpenDrawer: handleOpenDrawer,\n            vehicles: vehicles\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(VehicleDrawer, {\n        containerRef: rootRef,\n        onClose: handleCloseDrawer,\n        open: drawer.isOpen,\n        vehicle: vehicles.find(vehicle => vehicle.id === drawer.vehicleId)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\nVehicleList.getLayout = page => /*#__PURE__*/_jsxDEV(AuthGuard, {\n  children: /*#__PURE__*/_jsxDEV(OnBoardingGuard, {\n    children: /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      children: page\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 212,\n  columnNumber: 3\n}, this);\n\nexport default VehicleList;","map":{"version":3,"sources":["/Users/pulkitshah/Desktop/truckarv2/renderer/pages/dashboard/vehicles/index.js"],"names":["useEffect","useRef","useState","NextLink","Head","useTranslation","moment","Box","Button","Divider","Grid","InputAdornment","Tab","Tabs","TextField","Typography","styled","useDispatch","useSelector","vehicleApi","AuthGuard","OnBoardingGuard","DashboardLayout","VehicleDrawer","VehicleGrid","useMounted","useAuth","Plus","PlusIcon","Search","SearchIcon","gtm","DataStore","Predicates","Vehicle","tabs","label","value","sortOptions","applyFilters","vehicles","filters","filter","vehicle","query","containsQuery","number","toLowerCase","includes","status","statusMatched","applySort","sort","a","b","comparator","createdAt","VehicleListInner","shouldForwardProp","prop","theme","open","flexGrow","overflow","paddingBottom","spacing","paddingTop","zIndex","breakpoints","up","marginRight","transition","transitions","create","easing","sharp","duration","leavingScreen","easeOut","enteringScreen","VehicleList","t","dispatch","user","rootRef","state","console","log","drawer","setDrawer","isOpen","vehicleId","handleOpenDrawer","params","row","id","getVehiclesByUser","error","handleCloseDrawer","backgroundColor","display","px","mt","height","width","find","getLayout","page"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport NextLink from \"next/link\";\nimport Head from \"next/head\";\nimport { useTranslation } from \"react-i18next\";\nimport moment from \"moment\";\nimport {\n  Box,\n  Button,\n  Divider,\n  Grid,\n  InputAdornment,\n  Tab,\n  Tabs,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport { styled } from \"@mui/material/styles\";\nimport { useDispatch, useSelector } from \"../../../store\";\nimport { vehicleApi } from \"../../../api/vehicle-api\";\nimport { AuthGuard } from \"../../../components/authentication/auth-guard\";\nimport { OnBoardingGuard } from \"../../../components/authentication/onboarding-guard\";\nimport { DashboardLayout } from \"../../../components/dashboard/dashboard-layout\";\nimport { VehicleDrawer } from \"../../../components/dashboard/vehicle/vehicle-drawer\";\nimport VehicleGrid from \"../../../components/dashboard/vehicle/vehicle-grid\";\nimport { useMounted } from \"../../../hooks/use-mounted\";\nimport { useAuth } from \"../../../hooks/use-auth\";\nimport { Plus as PlusIcon } from \"../../../icons/plus\";\nimport { Search as SearchIcon } from \"../../../icons/search\";\nimport { gtm } from \"../../../lib/gtm\";\n\n// DataStore Imports\nimport { DataStore, Predicates } from \"@aws-amplify/datastore\";\nimport { Vehicle } from \"../../../models\";\n\nconst tabs = [\n  {\n    label: \"All\",\n    value: \"all\",\n  },\n  {\n    label: \"Canceled\",\n    value: \"canceled\",\n  },\n  {\n    label: \"Completed\",\n    value: \"complete\",\n  },\n  {\n    label: \"Pending\",\n    value: \"pending\",\n  },\n  {\n    label: \"Rejected\",\n    value: \"rejected\",\n  },\n];\n\nconst sortOptions = [\n  {\n    label: \"Newest\",\n    value: \"desc\",\n  },\n  {\n    label: \"Oldest\",\n    value: \"asc\",\n  },\n];\n\nconst applyFilters = (vehicles, filters) =>\n  vehicles.filter((vehicle) => {\n    if (filters.query) {\n      // Checks only the vehicle number, but can be extended to support other fields, such as customer\n      // name, email, etc.\n      const containsQuery = vehicle.number\n        .toLowerCase()\n        .includes(filters.query.toLowerCase());\n\n      if (!containsQuery) {\n        return false;\n      }\n    }\n\n    if (typeof filters.status !== \"undefined\") {\n      const statusMatched = vehicle.status === filters.status;\n\n      if (!statusMatched) {\n        return false;\n      }\n    }\n\n    return true;\n  });\n\nconst applySort = (vehicles, vehicle) =>\n  vehicles.sort((a, b) => {\n    const comparator = a.createdAt > b.createdAt ? -1 : 1;\n\n    return vehicle === \"desc\" ? comparator : -comparator;\n  });\n\nconst VehicleListInner = styled(\"div\", {\n  shouldForwardProp: (prop) => prop !== \"open\",\n})(({ theme, open }) => ({\n  flexGrow: 1,\n  overflow: \"hidden\",\n  paddingBottom: theme.spacing(8),\n  paddingTop: theme.spacing(8),\n  zIndex: 1,\n  [theme.breakpoints.up(\"lg\")]: {\n    marginRight: -500,\n  },\n  transition: theme.transitions.create(\"margin\", {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen,\n  }),\n  ...(open && {\n    [theme.breakpoints.up(\"lg\")]: {\n      marginRight: 0,\n    },\n    transition: theme.transitions.create(\"margin\", {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  }),\n}));\n\nconst VehicleList = () => {\n  const { t } = useTranslation();\n  const dispatch = useDispatch();\n  const { user } = useAuth();\n  const rootRef = useRef(null);\n  const vehicles = useSelector((state) => state.vehicles);\n  console.log(vehicles);\n  const [drawer, setDrawer] = useState({\n    isOpen: false,\n    vehicleId: null,\n  });\n\n  const handleOpenDrawer = (params) => {\n    setDrawer({\n      isOpen: true,\n      vehicleId: params.row.id,\n    });\n  };\n\n  useEffect(async () => {\n    try {\n      await vehicleApi.getVehiclesByUser(user, dispatch);\n    } catch (error) {\n      console.log(error);\n    }\n  }, []);\n\n  const handleCloseDrawer = () => {\n    setDrawer({\n      isOpen: false,\n      vehicleId: null,\n    });\n  };\n\n  return (\n    <>\n      <Head>\n        <title>Dashboard: Vehicle List | Truckar</title>\n      </Head>\n      <Box\n        component=\"main\"\n        ref={rootRef}\n        sx={{\n          backgroundColor: \"background.paper\",\n          display: \"flex\",\n          flexGrow: 1,\n          overflow: \"hidden\",\n        }}\n      >\n        <VehicleListInner open={drawer.isOpen}>\n          <Box sx={{ px: 3 }}>\n            <Grid container justifyContent=\"space-between\" spacing={3}>\n              <Grid item>\n                <Typography variant=\"h4\">{t(\"Vehicles\")}</Typography>\n              </Grid>\n              <Grid item>\n                <NextLink href=\"/dashboard/vehicles/new\" passHref>\n                  <Button\n                    component=\"a\"\n                    startIcon={<PlusIcon fontSize=\"small\" />}\n                    variant=\"contained\"\n                  >\n                    Add\n                  </Button>\n                </NextLink>\n              </Grid>\n            </Grid>\n          </Box>\n          <Box sx={{ mt: 3, px: 3, height: \"70vh\", width: \"100%\" }}>\n            <Divider />\n            <VehicleGrid onOpenDrawer={handleOpenDrawer} vehicles={vehicles} />\n          </Box>\n        </VehicleListInner>\n        <VehicleDrawer\n          containerRef={rootRef}\n          onClose={handleCloseDrawer}\n          open={drawer.isOpen}\n          vehicle={vehicles.find((vehicle) => vehicle.id === drawer.vehicleId)}\n        />\n      </Box>\n    </>\n  );\n};\n\nVehicleList.getLayout = (page) => (\n  <AuthGuard>\n    <OnBoardingGuard>\n      <DashboardLayout>{page}</DashboardLayout>\n    </OnBoardingGuard>\n  </AuthGuard>\n);\n\nexport default VehicleList;\n"]},"metadata":{},"sourceType":"module"}