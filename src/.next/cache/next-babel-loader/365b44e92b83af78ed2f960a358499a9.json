{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/pulkitshah/Desktop/truckarv2/renderer/components/dashboard/autocompletes/party-addnew-autocomplete.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* eslint-disable no-use-before-define */\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport * as Yup from \"yup\";\nimport { useFormik } from \"formik\";\nimport { Box, Button, Card, CardContent, Dialog, DialogTitle, Grid, Switch, TextField, Typography } from \"@mui/material\";\nimport { useDispatch } from \"../../../store\";\nimport GoogleMaps from \"../welcome/google-places-autocomplete\";\nimport { partyApi } from \"../../../api/party-api\";\nimport { FormatLineSpacing } from \"@mui/icons-material\";\n\nconst AddNewPartyFromAutocomplete = (_ref) => {\n  let {\n    open,\n    dialogValue,\n    setDialogValue,\n    toggleOpen,\n    type,\n    user\n  } = _ref,\n      rest = _objectWithoutProperties(_ref, [\"open\", \"dialogValue\", \"setDialogValue\", \"toggleOpen\", \"type\", \"user\"]);\n\n  const handleClose = () => {\n    setDialogValue({\n      name: \"\",\n      transporter: type !== \"customer\" ? true : false\n    });\n    toggleOpen(false);\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setValue({\n      name: dialogValue.name,\n      transporter: dialogValue.transporter\n    });\n\n    try {\n      await partyApi.createParty({\n        name: dialogValue.name.replace(/\\w\\S*/g, function (txt) {\n          return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n        }),\n        transporter: dialogValue.transporter\n      }, dispatch);\n      setFieldValue(type, response.data);\n    } catch (err) {\n      console.error(err);\n    }\n\n    handleClose();\n  };\n\n  useEffect(async () => {\n    try {\n      formik.setFieldValue(\"name\", dialogValue.name);\n    } catch (error) {\n      console.log(error);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      children: /*#__PURE__*/_jsxDEV(Dialog, {\n        open: open,\n        onClose: handleClose,\n        \"aria-labelledby\": \"form-dialog-name\",\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          id: \"form-dialog-name\",\n          children: \"Add a new party\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Formik, {\n          initialValues: {\n            name: dialogValue.name || \"\",\n            mobile: dialogValue.mobile || \"\",\n            location: dialogValue.location || \"\",\n            transporter: dialogValue.transporter || \"\",\n            submit: null\n          },\n          validationSchema: Yup.object().shape({\n            name: Yup.string().max(255).required(\"Name is required\"),\n            mobile: Yup.string().matches(/^[6-9]\\d{9}$/, \"Phone number is not valid\").required(\"Mobile is required\")\n          }),\n          onSubmit: async (values, {\n            resetForm,\n            setErrors,\n            setStatus,\n            setSubmitting\n          }) => {\n            try {\n              // NOTE: Make API request\n              const response = await axios.post(`/api/parties/`, _objectSpread({\n                name: values.name.replace(/\\w\\S*/g, function (txt) {\n                  return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n                })\n              }, values));\n              setFieldValue(type, response.data); // dispatch(updateParty(party, values));\n\n              resetForm();\n              setStatus({\n                success: true\n              });\n              setSubmitting(false);\n              enqueueSnackbar(\"Party updated\", {\n                variant: \"success\",\n                action: /*#__PURE__*/_jsxDEV(Button, {\n                  children: \"See all\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 27\n                }, this)\n              });\n              handleClose();\n            } catch (err) {\n              console.log(err);\n              setStatus({\n                success: false\n              });\n              setErrors({\n                submit: err.message\n              });\n              setSubmitting(false);\n            }\n          },\n          children: ({\n            errors,\n            handleBlur,\n            handleChange,\n            handleSubmit,\n            isSubmitting,\n            setFieldValue,\n            touched,\n            values\n          }) => /*#__PURE__*/_jsxDEV(\"form\", _objectSpread(_objectSpread({\n            className: clsx(classes.root, className),\n            onSubmit: handleSubmit\n          }, rest), {}, {\n            children: /*#__PURE__*/_jsxDEV(Card, {\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  container: true,\n                  spacing: 3,\n                  children: [/*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      error: Boolean(touched.name && errors.name),\n                      fullWidth: true,\n                      helperText: touched.name && errors.name,\n                      label: \"Main Contact Name\",\n                      name: \"name\",\n                      onBlur: handleBlur,\n                      onChange: event => {\n                        setFieldValue(\"name\", event.target.value.replace(/\\w\\S*/g, function (txt) {\n                          return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n                        }));\n                      },\n                      required: true,\n                      value: values.name,\n                      variant: \"outlined\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: /*#__PURE__*/_jsxDEV(TextField, {\n                      error: Boolean(touched.mobile && errors.mobile),\n                      fullWidth: true,\n                      helperText: touched.mobile && errors.mobile,\n                      label: \"Mobile\",\n                      name: \"mobile\",\n                      onBlur: handleBlur,\n                      onChange: event => {\n                        setFieldValue(\"mobile\", event.target.value.replace(/ /g, \"\"));\n                      },\n                      value: values.mobile,\n                      variant: \"outlined\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 175,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: /*#__PURE__*/_jsxDEV(GoogleMaps, {\n                      error: Boolean(touched.mobile && errors.mobile),\n                      name: \"location\",\n                      field: \"location\",\n                      setFieldValue: setFieldValue,\n                      handleBlur: handleBlur,\n                      values: values\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 193,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                    item: true,\n                    xs: 12,\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"h5\",\n                      color: \"textPrimary\",\n                      children: \"Party Type\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 203,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      color: \"textSecondary\",\n                      children: \"Is this party a transporter?\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n                      checked: values.transporter,\n                      color: \"secondary\",\n                      edge: \"start\",\n                      name: \"transporter\",\n                      onChange: handleChange,\n                      value: values.transporter\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 209,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Box, {\n                  mt: 2,\n                  children: /*#__PURE__*/_jsxDEV(Grid, {\n                    container: true,\n                    spacing: 3,\n                    children: [/*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      children: /*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"contained\",\n                        color: \"secondary\",\n                        type: \"submit\",\n                        disabled: isSubmitting,\n                        children: \"Create Party\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 222,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 221,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                      item: true,\n                      children: /*#__PURE__*/_jsxDEV(Button, {\n                        variant: \"contained\",\n                        color: \"secondary\",\n                        onClick: handleClose,\n                        children: \"Cancel\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 232,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 231,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 220,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 17\n            }, this)\n          }), void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\nexport default AddNewPartyFromAutocomplete;","map":{"version":3,"sources":["/Users/pulkitshah/Desktop/truckarv2/renderer/components/dashboard/autocompletes/party-addnew-autocomplete.js"],"names":["React","useState","useEffect","useCallback","Yup","useFormik","Box","Button","Card","CardContent","Dialog","DialogTitle","Grid","Switch","TextField","Typography","useDispatch","GoogleMaps","partyApi","FormatLineSpacing","AddNewPartyFromAutocomplete","open","dialogValue","setDialogValue","toggleOpen","type","user","rest","handleClose","name","transporter","handleSubmit","event","preventDefault","setValue","createParty","replace","txt","charAt","toUpperCase","substr","toLowerCase","dispatch","setFieldValue","response","data","err","console","error","formik","log","mobile","location","submit","object","shape","string","max","required","matches","values","resetForm","setErrors","setStatus","setSubmitting","axios","post","success","enqueueSnackbar","variant","action","message","errors","handleBlur","handleChange","isSubmitting","touched","clsx","classes","root","className","Boolean","target","value"],"mappings":"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","sourcesContent":["/* eslint-disable no-use-before-define */\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport * as Yup from \"yup\";\nimport { useFormik } from \"formik\";\n\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  Dialog,\n  DialogTitle,\n  Grid,\n  Switch,\n  TextField,\n  Typography,\n} from \"@mui/material\";\nimport { useDispatch } from \"../../../store\";\nimport GoogleMaps from \"../welcome/google-places-autocomplete\";\nimport { partyApi } from \"../../../api/party-api\";\nimport { FormatLineSpacing } from \"@mui/icons-material\";\n\nconst AddNewPartyFromAutocomplete = ({\n  open,\n  dialogValue,\n  setDialogValue,\n  toggleOpen,\n  type,\n  user,\n  ...rest\n}) => {\n  const handleClose = () => {\n    setDialogValue({\n      name: \"\",\n      transporter: type !== \"customer\" ? true : false,\n    });\n\n    toggleOpen(false);\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setValue({\n      name: dialogValue.name,\n      transporter: dialogValue.transporter,\n    });\n\n    try {\n      await partyApi.createParty(\n        {\n          name: dialogValue.name.replace(/\\w\\S*/g, function (txt) {\n            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n          }),\n          transporter: dialogValue.transporter,\n        },\n        dispatch\n      );\n      setFieldValue(type, response.data);\n    } catch (err) {\n      console.error(err);\n    }\n\n    handleClose();\n  };\n\n  useEffect(async () => {\n    try {\n      formik.setFieldValue(\"name\", dialogValue.name);\n    } catch (error) {\n      console.log(error);\n    }\n  }, []);\n\n  return (\n    <React.Fragment>\n      <form>\n        <Dialog\n          open={open}\n          onClose={handleClose}\n          aria-labelledby=\"form-dialog-name\"\n        >\n          <DialogTitle id=\"form-dialog-name\">Add a new party</DialogTitle>\n          <Formik\n            initialValues={{\n              name: dialogValue.name || \"\",\n              mobile: dialogValue.mobile || \"\",\n              location: dialogValue.location || \"\",\n              transporter: dialogValue.transporter || \"\",\n              submit: null,\n            }}\n            validationSchema={Yup.object().shape({\n              name: Yup.string().max(255).required(\"Name is required\"),\n              mobile: Yup.string()\n                .matches(/^[6-9]\\d{9}$/, \"Phone number is not valid\")\n                .required(\"Mobile is required\"),\n            })}\n            onSubmit={async (\n              values,\n              { resetForm, setErrors, setStatus, setSubmitting }\n            ) => {\n              try {\n                // NOTE: Make API request\n                const response = await axios.post(`/api/parties/`, {\n                  name: values.name.replace(/\\w\\S*/g, function (txt) {\n                    return (\n                      txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()\n                    );\n                  }),\n                  ...values,\n                });\n                setFieldValue(type, response.data);\n                // dispatch(updateParty(party, values));\n                resetForm();\n                setStatus({ success: true });\n                setSubmitting(false);\n                enqueueSnackbar(\"Party updated\", {\n                  variant: \"success\",\n                  action: <Button>See all</Button>,\n                });\n                handleClose();\n              } catch (err) {\n                console.log(err);\n                setStatus({ success: false });\n                setErrors({ submit: err.message });\n                setSubmitting(false);\n              }\n            }}\n          >\n            {({\n              errors,\n              handleBlur,\n              handleChange,\n              handleSubmit,\n              isSubmitting,\n              setFieldValue,\n              touched,\n              values,\n            }) => (\n              <form\n                className={clsx(classes.root, className)}\n                onSubmit={handleSubmit}\n                {...rest}\n              >\n                <Card>\n                  <CardContent>\n                    <Grid container spacing={3}>\n                      <Grid item xs={12}>\n                        <TextField\n                          error={Boolean(touched.name && errors.name)}\n                          fullWidth\n                          helperText={touched.name && errors.name}\n                          label=\"Main Contact Name\"\n                          name=\"name\"\n                          onBlur={handleBlur}\n                          onChange={(event) => {\n                            setFieldValue(\n                              \"name\",\n                              event.target.value.replace(\n                                /\\w\\S*/g,\n                                function (txt) {\n                                  return (\n                                    txt.charAt(0).toUpperCase() +\n                                    txt.substr(1).toLowerCase()\n                                  );\n                                }\n                              )\n                            );\n                          }}\n                          required\n                          value={values.name}\n                          variant=\"outlined\"\n                        />\n                      </Grid>\n                      <Grid item xs={12}>\n                        <TextField\n                          error={Boolean(touched.mobile && errors.mobile)}\n                          fullWidth\n                          helperText={touched.mobile && errors.mobile}\n                          label=\"Mobile\"\n                          name=\"mobile\"\n                          onBlur={handleBlur}\n                          onChange={(event) => {\n                            setFieldValue(\n                              \"mobile\",\n                              event.target.value.replace(/ /g, \"\")\n                            );\n                          }}\n                          value={values.mobile}\n                          variant=\"outlined\"\n                        />\n                      </Grid>\n                      <Grid item xs={12}>\n                        <GoogleMaps\n                          error={Boolean(touched.mobile && errors.mobile)}\n                          name={\"location\"}\n                          field={\"location\"}\n                          setFieldValue={setFieldValue}\n                          handleBlur={handleBlur}\n                          values={values}\n                        />\n                      </Grid>\n                      <Grid item xs={12}>\n                        <Typography variant=\"h5\" color=\"textPrimary\">\n                          Party Type\n                        </Typography>\n                        <Typography variant=\"body2\" color=\"textSecondary\">\n                          Is this party a transporter?\n                        </Typography>\n                        <Switch\n                          checked={values.transporter}\n                          color=\"secondary\"\n                          edge=\"start\"\n                          name=\"transporter\"\n                          onChange={handleChange}\n                          value={values.transporter}\n                        />\n                      </Grid>\n                    </Grid>\n                    <Box mt={2}>\n                      <Grid container spacing={3}>\n                        <Grid item>\n                          <Button\n                            variant=\"contained\"\n                            color=\"secondary\"\n                            type=\"submit\"\n                            disabled={isSubmitting}\n                          >\n                            Create Party\n                          </Button>\n                        </Grid>\n                        <Grid item>\n                          <Button\n                            variant=\"contained\"\n                            color=\"secondary\"\n                            onClick={handleClose}\n                          >\n                            Cancel\n                          </Button>\n                        </Grid>\n                      </Grid>\n                    </Box>\n                  </CardContent>\n                </Card>\n              </form>\n            )}\n          </Formik>\n        </Dialog>\n      </form>\n    </React.Fragment>\n  );\n};\nexport default AddNewPartyFromAutocomplete;\n"]},"metadata":{},"sourceType":"module"}