{"ast":null,"code":"import _defineProperty from \"/Users/pulkitshah/Desktop/truckarv2/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/pulkitshah/Desktop/truckarv2/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pulkitshah/Desktop/truckarv2/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/pulkitshah/Desktop/truckarv2/renderer/components/authentication/amplify-login.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from \"next/router\";\nimport * as Yup from \"yup\";\nimport { useFormik } from \"formik\";\nimport { Alert, Box, Button, FormHelperText, TextField } from \"@mui/material\";\nimport { useAuth } from \"../../hooks/use-auth\";\nimport { useMounted } from \"../../hooks/use-mounted\";\nexport var AmplifyLogin = function AmplifyLogin(props) {\n  _s();\n\n  var isMounted = useMounted();\n  var router = useRouter();\n\n  var _useAuth = useAuth(),\n      login = _useAuth.login;\n\n  var formik = useFormik({\n    initialValues: {\n      email: \"demo@devias.io\",\n      password: \"Password123!\",\n      submit: null\n    },\n    validationSchema: Yup.object({\n      email: Yup.string().email(\"Must be a valid email\").max(255).required(\"Email is required\")\n    }),\n    onSubmit: function () {\n      var _onSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(values, helpers) {\n        var returnUrl;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return login(values.email, values.password);\n\n              case 3:\n                if (isMounted()) {\n                  returnUrl = router.query.returnUrl || \"/dashboard\";\n                  router.push(returnUrl);\n                }\n\n                _context.next = 17;\n                break;\n\n              case 6:\n                _context.prev = 6;\n                _context.t0 = _context[\"catch\"](0);\n                console.error(_context.t0);\n\n                if (!isMounted()) {\n                  _context.next = 17;\n                  break;\n                }\n\n                if (!(_context.t0.code === \"UserNotConfirmedException\")) {\n                  _context.next = 14;\n                  break;\n                }\n\n                sessionStorage.setItem(\"username\", values.email);\n                router.push({\n                  pathname: \"/authentication/verify-code\",\n                  query: {\n                    email: values.email\n                  }\n                }, \"/authentication/verify-code\");\n                return _context.abrupt(\"return\");\n\n              case 14:\n                helpers.setStatus({\n                  success: false\n                });\n                helpers.setErrors({\n                  submit: _context.t0.message\n                });\n                helpers.setSubmitting(false);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 6]]);\n      }));\n\n      function onSubmit(_x, _x2) {\n        return _onSubmit.apply(this, arguments);\n      }\n\n      return onSubmit;\n    }()\n  });\n  return /*#__PURE__*/_jsxDEV(\"form\", _objectSpread(_objectSpread({\n    noValidate: true,\n    onSubmit: formik.handleSubmit\n  }, props), {}, {\n    children: [/*#__PURE__*/_jsxDEV(TextField, {\n      autoFocus: true,\n      error: Boolean(formik.touched.email && formik.errors.email),\n      fullWidth: true,\n      helperText: formik.touched.email && formik.errors.email,\n      label: \"Email Address\",\n      margin: \"normal\",\n      name: \"email\",\n      onBlur: formik.handleBlur,\n      onChange: formik.handleChange,\n      type: \"email\",\n      value: formik.values.email\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(TextField, {\n      error: Boolean(formik.touched.password && formik.errors.password),\n      fullWidth: true,\n      helperText: formik.touched.password && formik.errors.password,\n      label: \"Password\",\n      margin: \"normal\",\n      name: \"password\",\n      onBlur: formik.handleBlur,\n      onChange: formik.handleChange,\n      type: \"password\",\n      value: formik.values.password\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, _this), formik.errors.submit && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(FormHelperText, {\n        error: true,\n        children: formik.errors.submit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 2\n      },\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        disabled: formik.isSubmitting,\n        fullWidth: true,\n        size: \"large\",\n        type: \"submit\",\n        variant: \"contained\",\n        children: \"Log In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"info\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"You can use \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"demo@devias.io\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, _this), \" and password \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Password123!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 60\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, _this)]\n  }), void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(AmplifyLogin, \"wNMgksR4QKvQgtDOmHCRVaoV4VA=\", false, function () {\n  return [useMounted, useRouter, useAuth, useFormik];\n});\n\n_c = AmplifyLogin;\n\nvar _c;\n\n$RefreshReg$(_c, \"AmplifyLogin\");","map":{"version":3,"sources":["/Users/pulkitshah/Desktop/truckarv2/renderer/components/authentication/amplify-login.js"],"names":["useRouter","Yup","useFormik","Alert","Box","Button","FormHelperText","TextField","useAuth","useMounted","AmplifyLogin","props","isMounted","router","login","formik","initialValues","email","password","submit","validationSchema","object","string","max","required","onSubmit","values","helpers","returnUrl","query","push","console","error","code","sessionStorage","setItem","pathname","setStatus","success","setErrors","message","setSubmitting","handleSubmit","Boolean","touched","errors","handleBlur","handleChange","mt","isSubmitting"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport * as Yup from \"yup\";\nimport { useFormik } from \"formik\";\nimport { Alert, Box, Button, FormHelperText, TextField } from \"@mui/material\";\nimport { useAuth } from \"../../hooks/use-auth\";\nimport { useMounted } from \"../../hooks/use-mounted\";\n\nexport const AmplifyLogin = (props) => {\n  const isMounted = useMounted();\n  const router = useRouter();\n  const { login } = useAuth();\n  const formik = useFormik({\n    initialValues: {\n      email: \"demo@devias.io\",\n      password: \"Password123!\",\n      submit: null,\n    },\n    validationSchema: Yup.object({\n      email: Yup.string()\n        .email(\"Must be a valid email\")\n        .max(255)\n        .required(\"Email is required\"),\n    }),\n    onSubmit: async (values, helpers) => {\n      try {\n        await login(values.email, values.password);\n\n        if (isMounted()) {\n          const returnUrl = router.query.returnUrl || \"/dashboard\";\n          router.push(returnUrl);\n        }\n      } catch (err) {\n        console.error(err);\n\n        if (isMounted()) {\n          if (err.code === \"UserNotConfirmedException\") {\n            sessionStorage.setItem(\"username\", values.email);\n            router.push(\n              {\n                pathname: \"/authentication/verify-code\",\n                query: { email: values.email },\n              },\n              \"/authentication/verify-code\"\n            );\n            return;\n          }\n\n          helpers.setStatus({ success: false });\n          helpers.setErrors({ submit: err.message });\n          helpers.setSubmitting(false);\n        }\n      }\n    },\n  });\n\n  return (\n    <form noValidate onSubmit={formik.handleSubmit} {...props}>\n      <TextField\n        autoFocus\n        error={Boolean(formik.touched.email && formik.errors.email)}\n        fullWidth\n        helperText={formik.touched.email && formik.errors.email}\n        label=\"Email Address\"\n        margin=\"normal\"\n        name=\"email\"\n        onBlur={formik.handleBlur}\n        onChange={formik.handleChange}\n        type=\"email\"\n        value={formik.values.email}\n      />\n      <TextField\n        error={Boolean(formik.touched.password && formik.errors.password)}\n        fullWidth\n        helperText={formik.touched.password && formik.errors.password}\n        label=\"Password\"\n        margin=\"normal\"\n        name=\"password\"\n        onBlur={formik.handleBlur}\n        onChange={formik.handleChange}\n        type=\"password\"\n        value={formik.values.password}\n      />\n      {formik.errors.submit && (\n        <Box sx={{ mt: 3 }}>\n          <FormHelperText error>{formik.errors.submit}</FormHelperText>\n        </Box>\n      )}\n      <Box sx={{ mt: 2 }}>\n        <Button\n          disabled={formik.isSubmitting}\n          fullWidth\n          size=\"large\"\n          type=\"submit\"\n          variant=\"contained\"\n        >\n          Log In\n        </Button>\n      </Box>\n      <Box sx={{ mt: 3 }}>\n        <Alert severity=\"info\">\n          <div>\n            You can use <b>demo@devias.io</b> and password <b>Password123!</b>\n          </div>\n        </Alert>\n      </Box>\n    </form>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}