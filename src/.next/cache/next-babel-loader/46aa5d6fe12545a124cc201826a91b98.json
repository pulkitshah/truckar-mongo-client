{"ast":null,"code":"import _regeneratorRuntime from \"/Users/pulkitshah/Desktop/truckarv2/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pulkitshah/Desktop/truckarv2/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/pulkitshah/Desktop/truckarv2/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pulkitshah/Desktop/truckarv2/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { API } from \"aws-amplify\";\nimport { getUser as _getUser } from \"../graphql/queries\";\nimport { updateUser } from \"../graphql/mutations\";\nimport { useAuth } from \"../hooks/use-auth\";\n\nvar UserApi = /*#__PURE__*/function () {\n  function UserApi() {\n    _classCallCheck(this, UserApi);\n  }\n\n  _createClass(UserApi, [{\n    key: \"getUser\",\n    value: function () {\n      var _getUser2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(cognitoUser) {\n        var User;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return API.graphql({\n                  query: _getUser,\n                  variables: {\n                    id: cognitoUser.username\n                  }\n                });\n\n              case 2:\n                User = _context.sent;\n                return _context.abrupt(\"return\", User);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getUser(_x) {\n        return _getUser2.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }, {\n    key: \"updateUser\",\n    value: function () {\n      var _updateUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(updatedUser) {\n        var _useAuth, updateUser, User;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _useAuth = useAuth(), updateUser = _useAuth.updateUser;\n                _context2.next = 3;\n                return API.graphql({\n                  query: updateUser,\n                  variables: {\n                    input: updatedUser\n                  },\n                  authMode: \"AMAZON_COGNITO_USER_POOLS\"\n                });\n\n              case 3:\n                User = _context2.sent;\n                return _context2.abrupt(\"return\", User);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function updateUser(_x2) {\n        return _updateUser.apply(this, arguments);\n      }\n\n      return updateUser;\n    }()\n  }, {\n    key: \"updateUserInLocalDB\",\n    value: function () {\n      var _updateUserInLocalDB = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(updatedUser) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                updateUser(updatedUser);\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function updateUserInLocalDB(_x3) {\n        return _updateUserInLocalDB.apply(this, arguments);\n      }\n\n      return updateUserInLocalDB;\n    }()\n  }]);\n\n  return UserApi;\n}();\n\nexport var userApi = new UserApi();","map":{"version":3,"sources":["/Users/pulkitshah/Desktop/truckarv2/renderer/api/user-api.js"],"names":["API","getUser","updateUser","useAuth","UserApi","cognitoUser","graphql","query","variables","id","username","User","updatedUser","input","authMode","userApi"],"mappings":";;;;AAAA,SAASA,GAAT,QAAoB,aAApB;AACA,SAASC,OAAO,IAAPA,QAAT,QAAwB,oBAAxB;AACA,SAASC,UAAT,QAA2B,sBAA3B;AACA,SAASC,OAAT,QAAwB,mBAAxB;;IAEMC,O;;;;;;;;gGACUC,W;;;;;;;uBACOL,GAAG,CAACM,OAAJ,CAAY;AAC7BC,kBAAAA,KAAK,EAAEN,QADsB;AAE7BO,kBAAAA,SAAS,EAAE;AAAEC,oBAAAA,EAAE,EAAEJ,WAAW,CAACK;AAAlB;AAFkB,iBAAZ,C;;;AAAbC,gBAAAA,I;iDAICA,I;;;;;;;;;;;;;;;;;;;mGAGQC,W;;;;;;;2BACQT,OAAO,E,EAAtBD,U,YAAAA,U;;uBACWF,GAAG,CAACM,OAAJ,CAAY;AAC7BC,kBAAAA,KAAK,EAAEL,UADsB;AAE7BM,kBAAAA,SAAS,EAAE;AAAEK,oBAAAA,KAAK,EAAED;AAAT,mBAFkB;AAG7BE,kBAAAA,QAAQ,EAAE;AAHmB,iBAAZ,C;;;AAAbH,gBAAAA,I;kDAQCA,I;;;;;;;;;;;;;;;;;;;4GAGiBC,W;;;;;AACxBV,gBAAAA,UAAU,CAACU,WAAD,CAAV;;;;;;;;;;;;;;;;;;;;;AAIJ,OAAO,IAAMG,OAAO,GAAG,IAAIX,OAAJ,EAAhB","sourcesContent":["import { API } from \"aws-amplify\";\nimport { getUser } from \"../graphql/queries\";\nimport { updateUser } from \"../graphql/mutations\";\nimport { useAuth } from \"../hooks/use-auth\";\n\nclass UserApi {\n  async getUser(cognitoUser) {\n    const User = await API.graphql({\n      query: getUser,\n      variables: { id: cognitoUser.username },\n    });\n    return User;\n  }\n\n  async updateUser(updatedUser) {\n    const { updateUser } = useAuth();\n    const User = await API.graphql({\n      query: updateUser,\n      variables: { input: updatedUser },\n      authMode: \"AMAZON_COGNITO_USER_POOLS\",\n    });\n\n    // This function updates the user in Auth Context\n\n    return User;\n  }\n\n  async updateUserInLocalDB(updatedUser) {\n    updateUser(updatedUser);\n  }\n}\n\nexport const userApi = new UserApi();\n"]},"metadata":{},"sourceType":"module"}