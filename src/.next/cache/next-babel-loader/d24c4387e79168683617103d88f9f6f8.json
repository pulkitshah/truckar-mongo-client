{"ast":null,"code":"import _regeneratorRuntime from \"/Users/pulkitshah/Desktop/truckarv2/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pulkitshah/Desktop/truckarv2/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/pulkitshah/Desktop/truckarv2/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pulkitshah/Desktop/truckarv2/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { API } from \"aws-amplify\";\nimport { getUser as _getUser } from \"../graphql/queries\";\nimport { updateUser as _updateUser } from \"../graphql/mutations\";\nimport { slice } from \"../slices/user\";\n\nvar UserApi = /*#__PURE__*/function () {\n  function UserApi() {\n    _classCallCheck(this, UserApi);\n  }\n\n  _createClass(UserApi, [{\n    key: \"getUser\",\n    value: function () {\n      var _getUser2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(cognitoUser) {\n        var User;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return API.graphql({\n                  query: _getUser,\n                  variables: {\n                    id: cognitoUser.username\n                  }\n                });\n\n              case 2:\n                User = _context.sent;\n                return _context.abrupt(\"return\", User);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getUser(_x) {\n        return _getUser2.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }, {\n    key: \"updateUser\",\n    value: function () {\n      var _updateUser2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(editedUser, dispatch) {\n        var response, user;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return API.graphql({\n                  query: _updateUser,\n                  variables: {\n                    input: editedUser\n                  },\n                  authMode: \"AMAZON_COGNITO_USER_POOLS\"\n                });\n\n              case 2:\n                response = _context2.sent;\n                user = response.data.updateUser; //////////////////////// GraphQL API ////////////////////////\n\n                console.log(user); // Dispatch - Reducer\n\n                dispatch(slice.actions.updateUser({\n                  user: user\n                }));\n                return _context2.abrupt(\"return\", response);\n\n              case 7:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function updateUser(_x2, _x3) {\n        return _updateUser2.apply(this, arguments);\n      }\n\n      return updateUser;\n    }()\n  }]);\n\n  return UserApi;\n}();\n\nexport var userApi = new UserApi();","map":{"version":3,"sources":["/Users/pulkitshah/Desktop/truckarv2/renderer/api/user-api.js"],"names":["API","getUser","updateUser","slice","UserApi","cognitoUser","graphql","query","variables","id","username","User","editedUser","dispatch","input","authMode","response","user","data","console","log","actions","userApi"],"mappings":";;;;AAAA,SAASA,GAAT,QAAoB,aAApB;AACA,SAASC,OAAO,IAAPA,QAAT,QAAwB,oBAAxB;AACA,SAASC,UAAU,IAAVA,WAAT,QAA2B,sBAA3B;AACA,SAASC,KAAT,QAAsB,gBAAtB;;IAEMC,O;;;;;;;;gGACUC,W;;;;;;;uBACOL,GAAG,CAACM,OAAJ,CAAY;AAC7BC,kBAAAA,KAAK,EAAEN,QADsB;AAE7BO,kBAAAA,SAAS,EAAE;AAAEC,oBAAAA,EAAE,EAAEJ,WAAW,CAACK;AAAlB;AAFkB,iBAAZ,C;;;AAAbC,gBAAAA,I;iDAICA,I;;;;;;;;;;;;;;;;;;;oGAGQC,U,EAAYC,Q;;;;;;;uBAGJb,GAAG,CAACM,OAAJ,CAAY;AACjCC,kBAAAA,KAAK,EAAEL,WAD0B;AAEjCM,kBAAAA,SAAS,EAAE;AAAEM,oBAAAA,KAAK,EAAEF;AAAT,mBAFsB;AAGjCG,kBAAAA,QAAQ,EAAE;AAHuB,iBAAZ,C;;;AAAjBC,gBAAAA,Q;AAMAC,gBAAAA,I,GAAOD,QAAQ,CAACE,IAAT,CAAchB,U,EAE3B;;AAEAiB,gBAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ,E,CAEA;;AAEAJ,gBAAAA,QAAQ,CAACV,KAAK,CAACkB,OAAN,CAAcnB,UAAd,CAAyB;AAAEe,kBAAAA,IAAI,EAAJA;AAAF,iBAAzB,CAAD,CAAR;kDAEOD,Q;;;;;;;;;;;;;;;;;;;;;AAIX,OAAO,IAAMM,OAAO,GAAG,IAAIlB,OAAJ,EAAhB","sourcesContent":["import { API } from \"aws-amplify\";\nimport { getUser } from \"../graphql/queries\";\nimport { updateUser } from \"../graphql/mutations\";\nimport { slice } from \"../slices/user\";\n\nclass UserApi {\n  async getUser(cognitoUser) {\n    const User = await API.graphql({\n      query: getUser,\n      variables: { id: cognitoUser.username },\n    });\n    return User;\n  }\n\n  async updateUser(editedUser, dispatch) {\n    //////////////////////// GraphQL API ////////////////////////\n\n    const response = await API.graphql({\n      query: updateUser,\n      variables: { input: editedUser },\n      authMode: \"AMAZON_COGNITO_USER_POOLS\",\n    });\n\n    const user = response.data.updateUser;\n\n    //////////////////////// GraphQL API ////////////////////////\n\n    console.log(user);\n\n    // Dispatch - Reducer\n\n    dispatch(slice.actions.updateUser({ user }));\n\n    return response;\n  }\n}\n\nexport const userApi = new UserApi();\n"]},"metadata":{},"sourceType":"module"}