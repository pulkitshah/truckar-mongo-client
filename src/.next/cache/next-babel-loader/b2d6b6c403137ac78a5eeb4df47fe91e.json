{"ast":null,"code":"import { API } from \"aws-amplify\";\nimport { organisationsByUser } from \"../graphql/queries\";\nimport { createOrganisation, updateOrganisation } from \"../graphql/mutations\";\nimport { Organisation } from \"../models\";\nimport { DataStore, Predicates } from \"@aws-amplify/datastore\";\nconst now = new Date();\n\nclass OrganisationApi {\n  async getOrganisationsByUser(user) {\n    try {\n      const response = await DataStore.query(Organisation, c => c.user(\"eq\", user.id));\n      console.log(response);\n      const organisationesDB = await API.graphql({\n        query: organisationsByUser,\n        variables: {\n          user: user.id.toString()\n        }\n      });\n      console.log(organisationesDB.data.organisationsByUser.items);\n      return response;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async createOrganisation(newOrganisation) {\n    const response = await DataStore.save(new Organisation(newOrganisation));\n    const response2 = await API.graphql({\n      query: createOrganisation,\n      variables: {\n        input: newOrganisation\n      },\n      authMode: \"AMAZON_COGNITO_USER_POOLS\"\n    });\n    console.log(response);\n    return response;\n  }\n\n  async editOrganisation(editedOrganisation) {\n    const response = await API.graphql({\n      query: updateOrganisation,\n      variables: {\n        input: editedOrganisation\n      },\n      authMode: \"AMAZON_COGNITO_USER_POOLS\"\n    });\n    return response;\n  }\n\n}\n\nexport const organisationApi = new OrganisationApi();","map":{"version":3,"sources":["/Users/pulkitshah/Desktop/truckarv2/renderer/api/organisation-api.js"],"names":["API","organisationsByUser","createOrganisation","updateOrganisation","Organisation","DataStore","Predicates","now","Date","OrganisationApi","getOrganisationsByUser","user","response","query","c","id","console","log","organisationesDB","graphql","variables","toString","data","items","error","newOrganisation","save","response2","input","authMode","editOrganisation","editedOrganisation","organisationApi"],"mappings":"AAAA,SAASA,GAAT,QAAoB,aAApB;AACA,SAASC,mBAAT,QAAoC,oBAApC;AACA,SAASC,kBAAT,EAA6BC,kBAA7B,QAAuD,sBAAvD;AACA,SAASC,YAAT,QAA6B,WAA7B;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,wBAAtC;AAEA,MAAMC,GAAG,GAAG,IAAIC,IAAJ,EAAZ;;AAEA,MAAMC,eAAN,CAAsB;AACpB,QAAMC,sBAAN,CAA6BC,IAA7B,EAAmC;AACjC,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMP,SAAS,CAACQ,KAAV,CAAgBT,YAAhB,EAA+BU,CAAD,IACnDA,CAAC,CAACH,IAAF,CAAO,IAAP,EAAaA,IAAI,CAACI,EAAlB,CADqB,CAAvB;AAGAC,MAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AAEA,YAAMM,gBAAgB,GAAG,MAAMlB,GAAG,CAACmB,OAAJ,CAAY;AACzCN,QAAAA,KAAK,EAAEZ,mBADkC;AAEzCmB,QAAAA,SAAS,EAAE;AAAET,UAAAA,IAAI,EAAEA,IAAI,CAACI,EAAL,CAAQM,QAAR;AAAR;AAF8B,OAAZ,CAA/B;AAIAL,MAAAA,OAAO,CAACC,GAAR,CAAYC,gBAAgB,CAACI,IAAjB,CAAsBrB,mBAAtB,CAA0CsB,KAAtD;AAEA,aAAOX,QAAP;AACD,KAbD,CAaE,OAAOY,KAAP,EAAc;AACdR,MAAAA,OAAO,CAACC,GAAR,CAAYO,KAAZ;AACD;AACF;;AAED,QAAMtB,kBAAN,CAAyBuB,eAAzB,EAA0C;AACxC,UAAMb,QAAQ,GAAG,MAAMP,SAAS,CAACqB,IAAV,CAAe,IAAItB,YAAJ,CAAiBqB,eAAjB,CAAf,CAAvB;AACA,UAAME,SAAS,GAAG,MAAM3B,GAAG,CAACmB,OAAJ,CAAY;AAClCN,MAAAA,KAAK,EAAEX,kBAD2B;AAElCkB,MAAAA,SAAS,EAAE;AAAEQ,QAAAA,KAAK,EAAEH;AAAT,OAFuB;AAGlCI,MAAAA,QAAQ,EAAE;AAHwB,KAAZ,CAAxB;AAKAb,IAAAA,OAAO,CAACC,GAAR,CAAYL,QAAZ;AACA,WAAOA,QAAP;AACD;;AAED,QAAMkB,gBAAN,CAAuBC,kBAAvB,EAA2C;AACzC,UAAMnB,QAAQ,GAAG,MAAMZ,GAAG,CAACmB,OAAJ,CAAY;AACjCN,MAAAA,KAAK,EAAEV,kBAD0B;AAEjCiB,MAAAA,SAAS,EAAE;AAAEQ,QAAAA,KAAK,EAAEG;AAAT,OAFsB;AAGjCF,MAAAA,QAAQ,EAAE;AAHuB,KAAZ,CAAvB;AAKA,WAAOjB,QAAP;AACD;;AAtCmB;;AAyCtB,OAAO,MAAMoB,eAAe,GAAG,IAAIvB,eAAJ,EAAxB","sourcesContent":["import { API } from \"aws-amplify\";\nimport { organisationsByUser } from \"../graphql/queries\";\nimport { createOrganisation, updateOrganisation } from \"../graphql/mutations\";\nimport { Organisation } from \"../models\";\nimport { DataStore, Predicates } from \"@aws-amplify/datastore\";\n\nconst now = new Date();\n\nclass OrganisationApi {\n  async getOrganisationsByUser(user) {\n    try {\n      const response = await DataStore.query(Organisation, (c) =>\n        c.user(\"eq\", user.id)\n      );\n      console.log(response);\n\n      const organisationesDB = await API.graphql({\n        query: organisationsByUser,\n        variables: { user: user.id.toString() },\n      });\n      console.log(organisationesDB.data.organisationsByUser.items);\n\n      return response;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async createOrganisation(newOrganisation) {\n    const response = await DataStore.save(new Organisation(newOrganisation));\n    const response2 = await API.graphql({\n      query: createOrganisation,\n      variables: { input: newOrganisation },\n      authMode: \"AMAZON_COGNITO_USER_POOLS\",\n    });\n    console.log(response);\n    return response;\n  }\n\n  async editOrganisation(editedOrganisation) {\n    const response = await API.graphql({\n      query: updateOrganisation,\n      variables: { input: editedOrganisation },\n      authMode: \"AMAZON_COGNITO_USER_POOLS\",\n    });\n    return response;\n  }\n}\n\nexport const organisationApi = new OrganisationApi();\n"]},"metadata":{},"sourceType":"module"}