{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/pulkitshah/Desktop/truckarv2/renderer/contexts/amplify-context.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createContext, useEffect, useReducer } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Amplify, { Auth } from \"aws-amplify\";\nimport awsconfig from \"../aws-exports\";\nimport { userApi } from \"../api/user-api\";\nAmplify.configure(awsconfig); // import { amplifyConfig } from \"../config\";\n// Amplify.configure(amplifyConfig);\n\nconst initialState = {\n  isAuthenticated: false,\n  isInitialized: false,\n  user: null\n};\nconst handlers = {\n  INITIALIZE: (state, action) => {\n    const {\n      isAuthenticated,\n      user\n    } = action.payload;\n    return _objectSpread(_objectSpread({}, state), {}, {\n      isAuthenticated,\n      isInitialized: true,\n      user\n    });\n  },\n  LOGIN: (state, action) => {\n    const {\n      user\n    } = action.payload;\n    return _objectSpread(_objectSpread({}, state), {}, {\n      isAuthenticated: true,\n      user\n    });\n  },\n  LOGOUT: state => _objectSpread(_objectSpread({}, state), {}, {\n    isAuthenticated: false // user: {},\n\n  }),\n  REGISTER: state => _objectSpread({}, state),\n  VERIFY_CODE: state => _objectSpread({}, state),\n  RESEND_CODE: state => _objectSpread({}, state),\n  PASSWORD_RECOVERY: state => _objectSpread({}, state),\n  PASSWORD_RESET: state => _objectSpread({}, state),\n  UPDATE_USER: state => {\n    console.log(state);\n    return _objectSpread({}, state);\n  }\n};\n\nconst reducer = (state, action) => handlers[action.type] ? handlers[action.type](state, action) : state;\n\nexport const AuthContext = /*#__PURE__*/createContext(_objectSpread(_objectSpread({}, initialState), {}, {\n  platform: \"Amplify\",\n  login: () => Promise.resolve(),\n  logout: () => Promise.resolve(),\n  register: () => Promise.resolve(),\n  verifyCode: () => Promise.resolve(),\n  resendCode: () => Promise.resolve(),\n  passwordRecovery: () => Promise.resolve(),\n  passwordReset: () => Promise.resolve(),\n  updateUser: () => Promise.resolve(),\n  initialize: () => Promise.resolve()\n}));\nexport const AuthProvider = props => {\n  const {\n    children\n  } = props;\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer(reducer, initialState);\n  useEffect(() => {\n    initialize();\n  }, []);\n\n  const login = async (email, password) => {\n    const cognitoUser = await Auth.signIn(email, password);\n    const userDB = await userApi.getUser(cognitoUser);\n    const user = userDB.data.getUser;\n\n    if (user.challengeName) {\n      console.error(`Unable to login, because challenge \"${user.challengeName}\" is mandated and we did not handle this case.`);\n      return;\n    }\n\n    console.log(user);\n    dispatch({\n      type: \"LOGIN\",\n      payload: {\n        user: {\n          id: user.id,\n          avatar: \"/static/mock-images/avatars/avatar-anika_visser.png\",\n          email: user.email,\n          name: user.name,\n          phone_number: user.phone_number,\n          onBoardingRequired: user.onBoardingRequired,\n          plan: \"Premium\",\n          driverExpenseCategories: user.driverExpenseCategories,\n          _version: user._version\n        }\n      }\n    });\n  };\n\n  const logout = async () => {\n    await Auth.signOut();\n    dispatch({\n      type: \"LOGOUT\"\n    });\n  };\n\n  const register = async (name, email, mobile, password) => {\n    await Auth.signUp({\n      username: email,\n      password,\n      attributes: {\n        email,\n        phone_number: `+91${mobile}`,\n        name\n      }\n    });\n    dispatch({\n      type: \"REGISTER\"\n    });\n  };\n\n  const verifyCode = async (username, code) => {\n    await Auth.confirmSignUp(username, code);\n    dispatch({\n      type: \"VERIFY_CODE\"\n    });\n  };\n\n  const resendCode = async username => {\n    await Auth.resendSignUp(username);\n    dispatch({\n      type: \"RESEND_CODE\"\n    });\n  };\n\n  const passwordRecovery = async username => {\n    await Auth.forgotPassword(username);\n    dispatch({\n      type: \"PASSWORD_RECOVERY\"\n    });\n  };\n\n  const passwordReset = async (username, code, newPassword) => {\n    await Auth.forgotPasswordSubmit(username, code, newPassword);\n    dispatch({\n      type: \"PASSWORD_RESET\"\n    });\n  };\n\n  const initialize = async () => {\n    try {\n      const cognitoUser = await Auth.currentAuthenticatedUser();\n      const userDB = await userApi.getUser(cognitoUser);\n      const user = userDB.data.getUser; // Here you should extract the complete user profile to make it\n      // available in your entire app.\n      // The auth state only provides basic information.\n\n      dispatch({\n        type: \"INITIALIZE\",\n        payload: {\n          isAuthenticated: true,\n          user: {\n            id: user.id,\n            avatar: \"/static/mock-images/avatars/avatar-anika_visser.png\",\n            email: user.email,\n            name: user.name,\n            phone_number: user.phone_number,\n            onBoardingRequired: user.onBoardingRequired,\n            plan: \"Premium\",\n            _version: user._version\n          }\n        }\n      });\n    } catch (error) {\n      console.log(error);\n      dispatch({\n        type: \"INITIALIZE\",\n        payload: {\n          isAuthenticated: false,\n          user: null\n        }\n      });\n    }\n  };\n\n  const updateUser = async user => {\n    dispatch({\n      type: \"UPDATE_USER\",\n      payload: {\n        user\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: _objectSpread(_objectSpread({}, state), {}, {\n      platform: \"Amplify\",\n      login,\n      logout,\n      register,\n      verifyCode,\n      resendCode,\n      passwordRecovery,\n      passwordReset,\n      updateUser,\n      initialize\n    }),\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 201,\n    columnNumber: 5\n  }, this);\n};\nAuthProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport const AuthConsumer = AuthContext.Consumer;","map":{"version":3,"sources":["/Users/pulkitshah/Desktop/truckarv2/renderer/contexts/amplify-context.js"],"names":["createContext","useEffect","useReducer","PropTypes","Amplify","Auth","awsconfig","userApi","configure","initialState","isAuthenticated","isInitialized","user","handlers","INITIALIZE","state","action","payload","LOGIN","LOGOUT","REGISTER","VERIFY_CODE","RESEND_CODE","PASSWORD_RECOVERY","PASSWORD_RESET","UPDATE_USER","console","log","reducer","type","AuthContext","platform","login","Promise","resolve","logout","register","verifyCode","resendCode","passwordRecovery","passwordReset","updateUser","initialize","AuthProvider","props","children","dispatch","email","password","cognitoUser","signIn","userDB","getUser","data","challengeName","error","id","avatar","name","phone_number","onBoardingRequired","plan","driverExpenseCategories","_version","signOut","mobile","signUp","username","attributes","code","confirmSignUp","resendSignUp","forgotPassword","newPassword","forgotPasswordSubmit","currentAuthenticatedUser","propTypes","node","isRequired","AuthConsumer","Consumer"],"mappings":"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","sourcesContent":["import { createContext, useEffect, useReducer } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Amplify, { Auth } from \"aws-amplify\";\nimport awsconfig from \"../aws-exports\";\nimport { userApi } from \"../api/user-api\";\nAmplify.configure(awsconfig);\n\n// import { amplifyConfig } from \"../config\";\n\n// Amplify.configure(amplifyConfig);\n\nconst initialState = {\n  isAuthenticated: false,\n  isInitialized: false,\n  user: null,\n};\n\nconst handlers = {\n  INITIALIZE: (state, action) => {\n    const { isAuthenticated, user } = action.payload;\n\n    return {\n      ...state,\n      isAuthenticated,\n      isInitialized: true,\n      user,\n    };\n  },\n  LOGIN: (state, action) => {\n    const { user } = action.payload;\n\n    return {\n      ...state,\n      isAuthenticated: true,\n      user,\n    };\n  },\n  LOGOUT: (state) => ({\n    ...state,\n    isAuthenticated: false,\n    // user: {},\n  }),\n  REGISTER: (state) => ({ ...state }),\n  VERIFY_CODE: (state) => ({ ...state }),\n  RESEND_CODE: (state) => ({ ...state }),\n  PASSWORD_RECOVERY: (state) => ({ ...state }),\n  PASSWORD_RESET: (state) => ({ ...state }),\n  UPDATE_USER: (state) => {\n    console.log(state);\n\n    return { ...state };\n  },\n};\n\nconst reducer = (state, action) =>\n  handlers[action.type] ? handlers[action.type](state, action) : state;\n\nexport const AuthContext = createContext({\n  ...initialState,\n  platform: \"Amplify\",\n  login: () => Promise.resolve(),\n  logout: () => Promise.resolve(),\n  register: () => Promise.resolve(),\n  verifyCode: () => Promise.resolve(),\n  resendCode: () => Promise.resolve(),\n  passwordRecovery: () => Promise.resolve(),\n  passwordReset: () => Promise.resolve(),\n  updateUser: () => Promise.resolve(),\n  initialize: () => Promise.resolve(),\n});\n\nexport const AuthProvider = (props) => {\n  const { children } = props;\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    initialize();\n  }, []);\n\n  const login = async (email, password) => {\n    const cognitoUser = await Auth.signIn(email, password);\n    const userDB = await userApi.getUser(cognitoUser);\n    const user = userDB.data.getUser;\n    if (user.challengeName) {\n      console.error(\n        `Unable to login, because challenge \"${user.challengeName}\" is mandated and we did not handle this case.`\n      );\n      return;\n    }\n    console.log(user);\n    dispatch({\n      type: \"LOGIN\",\n      payload: {\n        user: {\n          id: user.id,\n          avatar: \"/static/mock-images/avatars/avatar-anika_visser.png\",\n          email: user.email,\n          name: user.name,\n          phone_number: user.phone_number,\n          onBoardingRequired: user.onBoardingRequired,\n          plan: \"Premium\",\n          driverExpenseCategories: user.driverExpenseCategories,\n          _version: user._version,\n        },\n      },\n    });\n  };\n\n  const logout = async () => {\n    await Auth.signOut();\n    dispatch({\n      type: \"LOGOUT\",\n    });\n  };\n\n  const register = async (name, email, mobile, password) => {\n    await Auth.signUp({\n      username: email,\n      password,\n      attributes: { email, phone_number: `+91${mobile}`, name },\n    });\n    dispatch({\n      type: \"REGISTER\",\n    });\n  };\n\n  const verifyCode = async (username, code) => {\n    await Auth.confirmSignUp(username, code);\n    dispatch({\n      type: \"VERIFY_CODE\",\n    });\n  };\n\n  const resendCode = async (username) => {\n    await Auth.resendSignUp(username);\n    dispatch({\n      type: \"RESEND_CODE\",\n    });\n  };\n\n  const passwordRecovery = async (username) => {\n    await Auth.forgotPassword(username);\n    dispatch({\n      type: \"PASSWORD_RECOVERY\",\n    });\n  };\n\n  const passwordReset = async (username, code, newPassword) => {\n    await Auth.forgotPasswordSubmit(username, code, newPassword);\n    dispatch({\n      type: \"PASSWORD_RESET\",\n    });\n  };\n\n  const initialize = async () => {\n    try {\n      const cognitoUser = await Auth.currentAuthenticatedUser();\n      const userDB = await userApi.getUser(cognitoUser);\n      const user = userDB.data.getUser;\n      // Here you should extract the complete user profile to make it\n      // available in your entire app.\n      // The auth state only provides basic information.\n      dispatch({\n        type: \"INITIALIZE\",\n        payload: {\n          isAuthenticated: true,\n          user: {\n            id: user.id,\n            avatar: \"/static/mock-images/avatars/avatar-anika_visser.png\",\n            email: user.email,\n            name: user.name,\n            phone_number: user.phone_number,\n            onBoardingRequired: user.onBoardingRequired,\n            plan: \"Premium\",\n            _version: user._version,\n          },\n        },\n      });\n    } catch (error) {\n      console.log(error);\n      dispatch({\n        type: \"INITIALIZE\",\n        payload: {\n          isAuthenticated: false,\n          user: null,\n        },\n      });\n    }\n  };\n\n  const updateUser = async (user) => {\n    dispatch({\n      type: \"UPDATE_USER\",\n      payload: {\n        user,\n      },\n    });\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        ...state,\n        platform: \"Amplify\",\n        login,\n        logout,\n        register,\n        verifyCode,\n        resendCode,\n        passwordRecovery,\n        passwordReset,\n        updateUser,\n        initialize,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nAuthProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport const AuthConsumer = AuthContext.Consumer;\n"]},"metadata":{},"sourceType":"module"}